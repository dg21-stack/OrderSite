_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{A2So:function(t,e,n){"use strict";var r=n("oYCi"),a=n("ZJlY"),o=n.n(a);e.a=function(t){return Object(r.jsx)("div",{className:o.a.card,children:t.children})}},BtXh:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("oYCi");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n("mXGw"),i=n.n(c),s=(n("A2So"),i.a.createContext({token:"",isLoggedIn:!1,login:function(t,e,n,r){},logout:function(){},user:"",isBusiness:!1,items:0,totalPrice:0,isOpen:!1,currCart:[],searchStr:"",toggle:function(){},append:function(t){},remove:function(t){},checkout:function(){},findIndex:function(t){},pushStr:function(){}})),u=function(t){var e=[],n=0,a=0,i="",u=!1,l="",d=localStorage.getItem("cart"),f=parseInt(localStorage.getItem("item")),m=parseInt(localStorage.getItem("total")),p=localStorage.getItem("user"),g=localStorage.getItem("business"),S=localStorage.getItem("search");d&&(e=JSON.parse(d)),f&&(n=f),m&&(a=m),p&&(i=p),u="true"===g,S&&(l=S);var j,h=Object(c.useState)(e),b=h[0],v=h[1],I=Object(c.useState)(n),O=I[0],_=I[1],x=Object(c.useState)(!1),y=x[0],N=x[1],w=Object(c.useState)(a),C=w[0],B=w[1],A=Object(c.useState)(i),k=A[0],J=A[1],R=Object(c.useState)(u),E=R[0],G=R[1],X=Object(c.useState)(l),P=X[0],T=X[1],Y=localStorage.getItem("token");Y&&(j=Y);var K=Object(c.useState)(j),L=K[0],M=K[1],z={token:L,isLoggedIn:!!L,login:function(t,e,n,r){M(t),J(e+" "+n),localStorage.setItem("token",t),G(r),localStorage.setItem("business",r.toString()),localStorage.setItem("user",e+" "+n)},logout:function(t){M(null),localStorage.removeItem("token"),localStorage.clear(),v([]),B(0),G(null),_(0),M(""),J("")},user:k,items:O,isOpen:y,isBusiness:E,currCart:b,totalprice:C,searchStr:P,pushStr:function(t){T(t),localStorage.setItem("search",t)},toggle:function(){N((function(t){return!t}))},append:function(t,e){var n=function(e){if(b[e].item===t)return v((function(t){return t[e].amount+=1,t[e].total+=t[e].price,localStorage.setItem("cart",JSON.stringify(t)),t})),_((function(t){return parseInt(t)+1})),B((function(t){return t+b[e].price})),localStorage.setItem("item",parseInt(O)+1),localStorage.setItem("total",parseInt(C)+b[e].price),{v:void 0}};for(var r in b){var a=n(r);if("object"===typeof a)return a.v}v((function(n){return void 0!==n?(n=[].concat(o(n),[{amount:1,total:e,price:e,item:t}]),localStorage.setItem("cart",JSON.stringify(n)),n):(localStorage.setItem("cart",JSON.stringify([{amount:1,total:e,price:e,item:t}])),[{amount:1,total:e,price:e,item:t}])})),_((function(t){return parseInt(t)+1})),localStorage.setItem("item",parseInt(O)+1),localStorage.setItem("total",parseInt(C)+e),B((function(t){return t+e}))},remove:function(t){var e=function(e){if(b[e].item===t)return v((function(t){return t[e].amount,0!==t[e].amount?(t[e].amount-=1,t[e].total-=t[e].price,localStorage.setItem("cart",JSON.stringify(t)),t):t})),_((function(t){return 1!=b[e].item?parseInt(t)-1:t})),1!=b[e].item&&(localStorage.setItem("total",parseInt(C)-b[e].price),B((function(t){return t-b[e].price})),localStorage.setItem("item",parseInt(O)-1)),{v:void 0}};for(var n in b){var r=e(n);if("object"===typeof r)return r.v}},checkout:function(){B(0),_(0),v((function(t){for(var e in t)t[e].amount-=t[e].amount,t[e].total-=t[e].total;return localStorage.setItem("cart",JSON.stringify(t)),t})),localStorage.setItem("total",0),localStorage.setItem("item",0)},findIndex:function(t){for(var e in b)if(b[e].item===t)return e;return!1}};return Object(r.jsx)(s.Provider,{value:z,children:t.children})};e.b=s},"Mx/s":function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/AllRestaurants/search",function(){return n("SKt0")}])},"S/vi":function(t,e,n){t.exports={container:"SearchInfo_container__3p7cA",name:"SearchInfo_name__3JG96",description:"SearchInfo_description__3TJln",address:"SearchInfo_address__1cSUR",image:"SearchInfo_image__G1GzR",redirectBtn:"SearchInfo_redirectBtn__9ozqZ",centered:"SearchInfo_centered__1WYID",nextBtn:"SearchInfo_nextBtn__2JMg1",input:"SearchInfo_input__2wQxO",selectedBtn:"SearchInfo_selectedBtn__3jUau"}},SKt0:function(t,e,n){"use strict";n.r(e);var r=n("NthX"),a=n.n(r),o=n("oYCi"),c=n("eijD"),i=n("mXGw"),s=n("A2So"),u=n("dAGg"),l=n("S/vi"),d=n.n(l),f=function(t){var e=Object(u.useRouter)();return Object(o.jsxs)("div",{className:d.a.container,children:[Object(o.jsx)("img",{src:t.image,className:d.a.image}),Object(o.jsx)("div",{className:d.a.name,children:t.name}),Object(o.jsx)("div",{className:d.a.description,children:t.description}),Object(o.jsx)("div",{className:d.a.address,children:t.address}),Object(o.jsx)("div",{class:d.a.centered,children:Object(o.jsx)("button",{className:d.a.redirectBtn,onClick:function(){e.push("/AllRestaurants/".concat(t.id))},children:"Business Page"})}),Object(o.jsx)("hr",{})]})},m=n("BtXh");e.default=function(){var t=Object(i.useContext)(m.b),e=Object(i.useState)(null),n=e[0],r=e[1],u=Object(i.useState)(1),l=u[0],p=u[1],g=Object(i.useState)(!1),S=g[0],j=g[1],h=Object(i.useState)(!1),b=h[0],v=h[1],I=Object(i.useState)([]),O=I[0],_=I[1],x=Object(i.useState)(null),y=x[0],N=x[1];function w(t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function t(e){var n,r,o,c,i=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:1,v(!0),t.next=4,fetch("../api/getResListHandler?name=".concat(e,"&pageIndex=").concat(r,"&pageSize=3"),{method:"GET"});case 4:return o=t.sent,t.next=7,o.json();case 7:c=t.sent,v(!1),_(c[0].data),console.log(c),j(c[0].totalRecords[0]?parseInt(null===(n=c[0].totalRecords[0])||void 0===n?void 0:n.description):1);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(i.useEffect)((function(){var e=setTimeout((function(){null==n?(r(t.searchStr),w(t.searchStr)):""!=n?(w(n),console.log("hello!",n),console.log(O)):_([])}),500);return function(){clearTimeout(e)}}),[n]);Object(i.useEffect)((function(){S&&N((function(t){for(t=[],console.log(S/2);t.length<parseInt(S/2);)t.length==l-1?t.push(Object(o.jsx)("span",{className:d.a.selectedBtn,children:"  \u25cf"})):t.push(Object(o.jsx)("span",{style:{color:"#797979"},children:" \u25cf"}));return t}))}),[S,l]);return Object(o.jsxs)(s.a,{children:[Object(o.jsx)(Head,{children:Object(o.jsx)("title",{children:"Search"})}),Object(o.jsx)("h2",{className:d.a.name,children:"Search"}),Object(o.jsx)("input",{placeHolder:"search for business!",onInput:function(t){p(1),r(t.target.value)},className:d.a.input,value:n}),!b&&""!=O&&Object(o.jsx)("div",{className:d.a.name,style:{color:"rgba(0,0,0,0.8)"},children:" Search Results: "}),Object(o.jsx)("hr",{}),b&&Object(o.jsx)("h2",{className:d.a.name,children:"Searching for Restaurants..."}),!b&&Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:O.map((function(t){return Object(o.jsx)(f,{name:t.name,id:t.id,image:t.image,address:t.address,description:t.description,isLoading:b},t.id)}))}),Object(o.jsx)("div",{children:y}),1!=l&&Object(o.jsx)("button",{className:d.a.nextBtn,onClick:function(){p((function(t){return t>1&&(t--,w(n,t)),t}))},children:"previous"}),l<S/2&&Object(o.jsx)("button",{className:d.a.nextBtn,onClick:function(){p((function(t){return S/2>t&&(console.log(S),t++,w(n,t)),console.log(t),t}))},children:"next"})]})]})}},ZJlY:function(t,e,n){t.exports={card:"Card_card__K0CRX",detailCard:"Card_detailCard__1Soue",itemCard:"Card_itemCard__1wKsw"}},dAGg:function(t,e,n){t.exports=n("bBV7")},eijD:function(t,e,n){"use strict";function r(t,e,n,r,a,o,c){try{var i=t[o](c),s=i.value}catch(u){return void n(u)}i.done?e(s):Promise.resolve(s).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var c=t.apply(e,n);function i(t){r(c,a,o,i,s,"next",t)}function s(t){r(c,a,o,i,s,"throw",t)}i(void 0)}))}}n.d(e,"a",(function(){return a}))}},[["Mx/s",0,2,1]]]);