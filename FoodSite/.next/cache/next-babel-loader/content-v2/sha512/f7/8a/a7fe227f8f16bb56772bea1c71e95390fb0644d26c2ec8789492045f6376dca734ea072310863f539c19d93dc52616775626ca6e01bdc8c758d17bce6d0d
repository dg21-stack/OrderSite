{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useRouter } from \"next/router\";\nimport { useState, useContext, useEffect, Fragment } from \"react\";\nimport Card from \"../../components/Card/Card\";\nimport AddItem from \"../../components/items/addItem\";\nimport ChangeDescription from \"../../components/items/ChangeDescription\";\nimport ChangeImage from \"../../components/items/ChangeImage\";\nimport ChangeName from \"../../components/items/ChangeName\";\nimport ChangeParagraph from \"../../components/items/ChangeParagraph\";\nimport RemoveItem from \"../../components/items/removeItem\";\nimport AuthContext from \"../../components/store/use-context\";\nimport styles from './business.module.css';\nimport BusinessReviews from \"../../components/Details/BusinessReviews\";\nimport Head from 'next/head';\n\nconst BusinessPage = () => {\n  const {\n    0: currHeight,\n    1: setCurrHeight\n  } = useState(0);\n  const {\n    0: currHeight1,\n    1: setCurrHeight1\n  } = useState(0);\n  const {\n    0: currHeight2,\n    1: setCurrHeight2\n  } = useState(0);\n  const {\n    0: currHeight3,\n    1: setCurrHeight3\n  } = useState(0);\n  const {\n    0: currHeight4,\n    1: setCurrHeight4\n  } = useState(0);\n  const {\n    0: currHeight5,\n    1: setCurrHeight5\n  } = useState(0);\n  const {\n    0: totalNum,\n    1: setTotalNum\n  } = useState(null);\n  const {\n    0: reviewList,\n    1: setReviewList\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: pageNum,\n    1: setPageNum\n  } = useState(1);\n\n  async function getter(enteredItemData = 1) {\n    setIsLoading(true);\n    let a = await getID();\n    console.log(a);\n    const response = await fetch(`../api/getHandler1?pageIndex=${enteredItemData}&pageSize=2&restaurantURL=${a}`, {\n      method: 'GET'\n    });\n    const data = await response.json();\n    setIsLoading(false);\n\n    if (!totalNum) {\n      setTotalNum(data[0].totalRecords[0] ? data[0].totalRecords[0].body : 1);\n    }\n\n    console.log(data, totalNum);\n    setReviewList(data[0].data);\n  }\n\n  useEffect(() => {\n    getter();\n  }, []);\n\n  const plus = () => {\n    setPageNum(prevVal => {\n      if (totalNum / 2 > prevVal) {\n        prevVal++;\n        getter(prevVal);\n      }\n\n      return prevVal;\n    });\n  };\n\n  const minus = () => {\n    setPageNum(prevVal => {\n      if (prevVal > 1) {\n        prevVal--;\n        getter(prevVal);\n      }\n\n      return prevVal;\n    });\n  };\n\n  const router = useRouter();\n  const authCtx = useContext(AuthContext);\n  useEffect(() => {\n    if (!authCtx.isLoggedIn) {\n      router.push('/');\n    }\n\n    if (!authCtx.isBusiness) {\n      router.push('/AllRestaurants');\n    }\n  }, [authCtx.isLoggedIn]);\n\n  async function getID() {\n    const response = await fetch(`../api/getIDhandler?email=${authCtx.token}`, {\n      method: 'GET'\n    });\n    const data = await response.json();\n    console.log(data);\n    return data.id;\n  }\n\n  async function addItemHandler(enteredItemData) {\n    const response = await fetch('../api/handler1', {\n      method: 'POST',\n      body: JSON.stringify({\n        item: enteredItemData,\n        email: authCtx.token\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await response.json();\n  }\n\n  async function addParagraphHandler(enteredItemData) {\n    const response = await fetch('../api/paragraphHandler', {\n      method: 'POST',\n      body: JSON.stringify({\n        item: enteredItemData,\n        email: authCtx.token\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await response.json();\n  }\n\n  async function nameChangeHandler(enteredItemData) {\n    const response = await fetch('../api/handler5', {\n      method: 'POST',\n      body: JSON.stringify({\n        item: enteredItemData,\n        email: authCtx.token\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    await response.json();\n  }\n\n  async function removeItemHandler(enteredItemData) {\n    const response = await fetch('../api/handler2', {\n      method: 'POST',\n      body: JSON.stringify({\n        item: enteredItemData,\n        email: authCtx.token\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await response.json();\n  }\n\n  async function changeHandler(enteredItemData, isDescrip) {\n    const response = await fetch(`../api/handler${isDescrip ? 4 : 3}`, {\n      method: 'POST',\n      body: JSON.stringify({\n        item: enteredItemData,\n        email: authCtx.token\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await response.json();\n  }\n\n  const heightHandler = () => {\n    if (currHeight == 0) {\n      setCurrHeight(600);\n      return;\n    }\n\n    setCurrHeight(0);\n  };\n\n  const heightHandler1 = () => {\n    if (currHeight1 == 0) {\n      setCurrHeight1(300);\n      return;\n    }\n\n    setCurrHeight1(0);\n  };\n\n  const heightHandler2 = () => {\n    if (currHeight2 == 0) {\n      setCurrHeight2(300);\n      return;\n    }\n\n    setCurrHeight2(0);\n  };\n\n  const heightHandler3 = () => {\n    if (currHeight3 == 0) {\n      setCurrHeight3(300);\n      return;\n    }\n\n    setCurrHeight3(0);\n  };\n\n  const heightHandler4 = () => {\n    if (currHeight4 == 0) {\n      setCurrHeight4(500);\n      return;\n    }\n\n    setCurrHeight4(0);\n  };\n\n  const heightHandler5 = () => {\n    if (currHeight5 == 0) {\n      setCurrHeight5(300);\n      return;\n    }\n\n    setCurrHeight5(0);\n  };\n\n  return /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Business\"\n      })\n    }), /*#__PURE__*/_jsxs(Card, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.title,\n        children: \"Welcome to Your Business Page!\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.subtitles,\n        children: \"Customize Your Entries Here:\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler,\n        style: {\n          borderRadius: '20px 20px 0px 0px'\n        },\n        children: \"Add Item Here\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight\n        },\n        children: /*#__PURE__*/_jsx(AddItem, {\n          clicker: heightHandler,\n          addItemHandler: addItemHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler1,\n        children: \" Remove Item Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight1\n        },\n        children: /*#__PURE__*/_jsx(RemoveItem, {\n          clicker: heightHandler1,\n          removeItemHandler: removeItemHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler2,\n        children: \" Change Subtitle Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight2\n        },\n        children: /*#__PURE__*/_jsx(ChangeDescription, {\n          clicker: heightHandler2,\n          changeDescriptionHandler: changeHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler3,\n        children: \" Change Name Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight3\n        },\n        children: /*#__PURE__*/_jsx(ChangeName, {\n          clicker: heightHandler3,\n          changeDescriptionHandler: nameChangeHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler4,\n        children: \" Change Description Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight4\n        },\n        children: /*#__PURE__*/_jsx(ChangeParagraph, {\n          clicker: heightHandler4,\n          changeDescriptionHandler: addParagraphHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        style: {\n          borderRadius: currHeight5 == 0 ? '0px 0px 20px 20px' : '0px 0px 0px 0px'\n        },\n        onClick: heightHandler5,\n        children: \" Change Image Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight5,\n          borderRadius: '0px 0px 20px 20px',\n          border: currHeight5 == 0 ? 'none' : '1px solid grey'\n        },\n        children: /*#__PURE__*/_jsx(ChangeImage, {\n          clicker: heightHandler5,\n          changeImageHandler: changeHandler\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Card, {\n      children: /*#__PURE__*/_jsx(BusinessReviews, {\n        total: totalNum,\n        isLoading: isLoading,\n        getter: getter,\n        pageNum: pageNum,\n        reviewList: reviewList,\n        plus: plus,\n        minus: minus\n      })\n    })]\n  });\n};\n\nexport default BusinessPage;","map":null,"metadata":{},"sourceType":"module"}