{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/gaida/Documents/React/FoodOrderingSite/node_modules/@babel/runtime/regenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"C:/Users/gaida/Documents/React/FoodOrderingSite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useRouter } from \"next/router\";\nimport { useState, useContext, useEffect, Fragment } from \"react\";\nimport Card from \"../../components/Card/Card\";\nimport AddItem from \"../../components/items/addItem\";\nimport ChangeDescription from \"../../components/items/ChangeDescription\";\nimport ChangeImage from \"../../components/items/ChangeImage\";\nimport ChangeName from \"../../components/items/ChangeName\";\nimport ChangeParagraph from \"../../components/items/ChangeParagraph\";\nimport RemoveItem from \"../../components/items/removeItem\";\nimport AuthContext from \"../../components/store/use-context\";\nimport styles from './business.module.css';\nimport BusinessReviews from \"../../components/Details/BusinessReviews\";\nimport Head from 'next/head';\n\nvar BusinessPage = function BusinessPage() {\n  var _useState = useState(0),\n      currHeight = _useState[0],\n      setCurrHeight = _useState[1];\n\n  var _useState2 = useState(0),\n      currHeight1 = _useState2[0],\n      setCurrHeight1 = _useState2[1];\n\n  var _useState3 = useState(0),\n      currHeight2 = _useState3[0],\n      setCurrHeight2 = _useState3[1];\n\n  var _useState4 = useState(0),\n      currHeight3 = _useState4[0],\n      setCurrHeight3 = _useState4[1];\n\n  var _useState5 = useState(0),\n      currHeight4 = _useState5[0],\n      setCurrHeight4 = _useState5[1];\n\n  var _useState6 = useState(0),\n      currHeight5 = _useState6[0],\n      setCurrHeight5 = _useState6[1];\n\n  var _useState7 = useState(null),\n      totalNum = _useState7[0],\n      setTotalNum = _useState7[1];\n\n  var _useState8 = useState([]),\n      reviewList = _useState8[0],\n      setReviewList = _useState8[1];\n\n  var _useState9 = useState(false),\n      isLoading = _useState9[0],\n      setIsLoading = _useState9[1];\n\n  var _useState10 = useState(1),\n      pageNum = _useState10[0],\n      setPageNum = _useState10[1];\n\n  function getter() {\n    return _getter.apply(this, arguments);\n  }\n\n  function _getter() {\n    _getter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var enteredItemData,\n          a,\n          response,\n          data,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              enteredItemData = _args.length > 0 && _args[0] !== undefined ? _args[0] : 1;\n              setIsLoading(true);\n              _context.next = 4;\n              return getID();\n\n            case 4:\n              a = _context.sent;\n              console.log(a);\n              _context.next = 8;\n              return fetch(\"../api/getHandler1?pageIndex=\".concat(enteredItemData, \"&pageSize=2&restaurantURL=\").concat(a), {\n                method: 'GET'\n              });\n\n            case 8:\n              response = _context.sent;\n              _context.next = 11;\n              return response.json();\n\n            case 11:\n              data = _context.sent;\n              setIsLoading(false);\n\n              if (!totalNum) {\n                setTotalNum(data[0].totalRecords[0] ? data[0].totalRecords[0].body : 1);\n              }\n\n              console.log(data, totalNum);\n              setReviewList(data[0].data);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getter.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    getter();\n  }, []);\n\n  var plus = function plus() {\n    setPageNum(function (prevVal) {\n      if (totalNum / 2 > prevVal) {\n        prevVal++;\n        getter(prevVal);\n      }\n\n      return prevVal;\n    });\n  };\n\n  var minus = function minus() {\n    setPageNum(function (prevVal) {\n      if (prevVal > 1) {\n        prevVal--;\n        getter(prevVal);\n      }\n\n      return prevVal;\n    });\n  };\n\n  var router = useRouter();\n  var authCtx = useContext(AuthContext);\n  useEffect(function () {\n    if (!authCtx.isLoggedIn) {\n      router.push('/');\n    }\n\n    if (!authCtx.isBusiness) {\n      router.push('/AllRestaurants');\n    }\n  }, [authCtx.isLoggedIn]);\n\n  function getID() {\n    return _getID.apply(this, arguments);\n  }\n\n  function _getID() {\n    _getID = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"../api/getIDhandler?email=\".concat(authCtx.token), {\n                method: 'GET'\n              });\n\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context2.sent;\n              console.log(data);\n              return _context2.abrupt(\"return\", data.id);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _getID.apply(this, arguments);\n  }\n\n  function addItemHandler(_x) {\n    return _addItemHandler.apply(this, arguments);\n  }\n\n  function _addItemHandler() {\n    _addItemHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(enteredItemData) {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return fetch('../api/handler1', {\n                method: 'POST',\n                body: JSON.stringify({\n                  item: enteredItemData,\n                  email: authCtx.token\n                }),\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 2:\n              response = _context3.sent;\n              _context3.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context3.sent;\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _addItemHandler.apply(this, arguments);\n  }\n\n  function addParagraphHandler(_x2) {\n    return _addParagraphHandler.apply(this, arguments);\n  }\n\n  function _addParagraphHandler() {\n    _addParagraphHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(enteredItemData) {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return fetch('../api/paragraphHandler', {\n                method: 'POST',\n                body: JSON.stringify({\n                  item: enteredItemData,\n                  email: authCtx.token\n                }),\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 2:\n              response = _context4.sent;\n              _context4.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context4.sent;\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _addParagraphHandler.apply(this, arguments);\n  }\n\n  function nameChangeHandler(_x3) {\n    return _nameChangeHandler.apply(this, arguments);\n  }\n\n  function _nameChangeHandler() {\n    _nameChangeHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(enteredItemData) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return fetch('../api/handler5', {\n                method: 'POST',\n                body: JSON.stringify({\n                  item: enteredItemData,\n                  email: authCtx.token\n                }),\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 2:\n              response = _context5.sent;\n              _context5.next = 5;\n              return response.json();\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _nameChangeHandler.apply(this, arguments);\n  }\n\n  function removeItemHandler(_x4) {\n    return _removeItemHandler.apply(this, arguments);\n  }\n\n  function _removeItemHandler() {\n    _removeItemHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(enteredItemData) {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return fetch('../api/handler2', {\n                method: 'POST',\n                body: JSON.stringify({\n                  item: enteredItemData,\n                  email: authCtx.token\n                }),\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 2:\n              response = _context6.sent;\n              _context6.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context6.sent;\n\n            case 6:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _removeItemHandler.apply(this, arguments);\n  }\n\n  function changeHandler(_x5, _x6) {\n    return _changeHandler.apply(this, arguments);\n  }\n\n  function _changeHandler() {\n    _changeHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(enteredItemData, isDescrip) {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return fetch(\"../api/handler\".concat(isDescrip ? 4 : 3), {\n                method: 'POST',\n                body: JSON.stringify({\n                  item: enteredItemData,\n                  email: authCtx.token\n                }),\n                headers: {\n                  'Content-Type': 'application/json'\n                }\n              });\n\n            case 2:\n              response = _context7.sent;\n              _context7.next = 5;\n              return response.json();\n\n            case 5:\n              data = _context7.sent;\n\n            case 6:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _changeHandler.apply(this, arguments);\n  }\n\n  var heightHandler = function heightHandler() {\n    if (currHeight == 0) {\n      setCurrHeight(600);\n      return;\n    }\n\n    setCurrHeight(0);\n  };\n\n  var heightHandler1 = function heightHandler1() {\n    if (currHeight1 == 0) {\n      setCurrHeight1(300);\n      return;\n    }\n\n    setCurrHeight1(0);\n  };\n\n  var heightHandler2 = function heightHandler2() {\n    if (currHeight2 == 0) {\n      setCurrHeight2(300);\n      return;\n    }\n\n    setCurrHeight2(0);\n  };\n\n  var heightHandler3 = function heightHandler3() {\n    if (currHeight3 == 0) {\n      setCurrHeight3(300);\n      return;\n    }\n\n    setCurrHeight3(0);\n  };\n\n  var heightHandler4 = function heightHandler4() {\n    if (currHeight4 == 0) {\n      setCurrHeight4(500);\n      return;\n    }\n\n    setCurrHeight4(0);\n  };\n\n  var heightHandler5 = function heightHandler5() {\n    if (currHeight5 == 0) {\n      setCurrHeight5(300);\n      return;\n    }\n\n    setCurrHeight5(0);\n  };\n\n  return /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Business\"\n      })\n    }), /*#__PURE__*/_jsxs(Card, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.title,\n        children: \"Welcome to Your Business Page!\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.subtitles,\n        children: \"Customize Your Entries Here:\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler,\n        style: {\n          borderRadius: '20px 20px 0px 0px'\n        },\n        children: \"Add Item Here\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight\n        },\n        children: /*#__PURE__*/_jsx(AddItem, {\n          clicker: heightHandler,\n          addItemHandler: addItemHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler1,\n        children: \" Remove Item Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight1\n        },\n        children: /*#__PURE__*/_jsx(RemoveItem, {\n          clicker: heightHandler1,\n          removeItemHandler: removeItemHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler2,\n        children: \" Change Subtitle Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight2\n        },\n        children: /*#__PURE__*/_jsx(ChangeDescription, {\n          clicker: heightHandler2,\n          changeDescriptionHandler: changeHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler3,\n        children: \" Change Name Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight3\n        },\n        children: /*#__PURE__*/_jsx(ChangeName, {\n          clicker: heightHandler3,\n          changeDescriptionHandler: nameChangeHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        onClick: heightHandler4,\n        children: \" Change Description Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight4\n        },\n        children: /*#__PURE__*/_jsx(ChangeParagraph, {\n          clicker: heightHandler4,\n          changeDescriptionHandler: addParagraphHandler\n        })\n      }), /*#__PURE__*/_jsx(\"button\", {\n        className: styles.addItem,\n        style: {\n          borderRadius: currHeight5 == 0 ? '0px 0px 20px 20px' : '0px 0px 0px 0px'\n        },\n        onClick: heightHandler5,\n        children: \" Change Image Here \"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.visibility,\n        style: {\n          maxHeight: currHeight5,\n          borderRadius: '0px 0px 20px 20px',\n          border: currHeight5 == 0 ? 'none' : '1px solid grey'\n        },\n        children: /*#__PURE__*/_jsx(ChangeImage, {\n          clicker: heightHandler5,\n          changeImageHandler: changeHandler\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Card, {\n      children: /*#__PURE__*/_jsx(BusinessReviews, {\n        total: totalNum,\n        isLoading: isLoading,\n        getter: getter,\n        pageNum: pageNum,\n        reviewList: reviewList,\n        plus: plus,\n        minus: minus\n      })\n    })]\n  });\n};\n\nexport default BusinessPage;","map":null,"metadata":{},"sourceType":"module"}