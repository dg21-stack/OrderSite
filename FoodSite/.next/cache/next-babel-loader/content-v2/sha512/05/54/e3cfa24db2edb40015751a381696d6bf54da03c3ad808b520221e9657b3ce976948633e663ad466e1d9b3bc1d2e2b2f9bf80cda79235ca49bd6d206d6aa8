{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport classes from './Nav.module.css';\nimport Link from 'next/link';\nimport { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../store/use-context';\nimport router, { useRouter } from 'next/router';\nimport ResCard from './ResCard';\n\nconst Nav = () => {\n  const authCtx = useContext(AuthContext);\n  const router = useRouter();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: currText,\n    1: setCurrText\n  } = useState('');\n  const {\n    0: currSearch,\n    1: setCurrSearch\n  } = useState([]);\n  const {\n    0: showSearch,\n    1: setShowSearch\n  } = useState(false);\n\n  async function getter(value) {\n    setIsLoading(true);\n    const response = await fetch(`../api/getResListHandler?name=${value}`, {\n      method: 'GET'\n    });\n    const data = await response.json();\n    setCurrSearch(data[0].data);\n    setIsLoading(false);\n  }\n\n  const clearSearch = () => {\n    setCurrText('');\n    setCurrSearch([]);\n    setShowSearch(false);\n  };\n\n  useEffect(() => {\n    const identifier = setTimeout(() => {\n      console.log('this is on a timer', currText);\n\n      if (currText.length > 0) {\n        getter(currText);\n        console.log(currSearch);\n\n        if (!showSearch) {\n          setShowSearch(true);\n        }\n      }\n    }, 500);\n    return () => {\n      clearTimeout(identifier);\n    };\n  }, [currText]);\n\n  const logoutHandler = () => {\n    authCtx.logout();\n    router.push('/');\n  };\n\n  const cartHandler = () => {\n    authCtx.toggle();\n  };\n\n  const textHandler = e => {\n    setCurrText(e.target.value);\n\n    if (e.target.value == '' && showSearch) {\n      setShowSearch(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"header\", {\n    className: classes.header,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: classes.logo,\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: \"ReactEats\"\n      })\n    }), authCtx.isLoggedIn && !authCtx.isBusiness && window.location.pathname != '/AllRestaurants/search' && /*#__PURE__*/_jsxs(\"button\", {\n      onClick: cartHandler,\n      className: classes.navButton,\n      children: [\"\\uD83D\\uDED2 Your Cart  \", /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.cart,\n        children: [\" \", authCtx.items]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      children: authCtx.isLoggedIn && !authCtx.isBusiness && window.location.pathname != '/AllRestaurants/search' && /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.inputContainer,\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          className: showSearch ? `${classes.input} ${classes.on}` : classes.input,\n          onInput: textHandler,\n          value: currText,\n          placeholder: \"Find Restaurant\"\n        }), showSearch && currSearch.length != 0 && /*#__PURE__*/_jsx(ResCard, {\n          isLoading: isLoading,\n          clear: clearSearch,\n          search: currText,\n          restaurants: currSearch\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"nav\", {\n      children: /*#__PURE__*/_jsxs(\"ul\", {\n        children: [/*#__PURE__*/_jsx(\"li\", {\n          children: /*#__PURE__*/_jsxs(\"span\", {\n            children: [authCtx.isLoggedIn && !authCtx.isBusiness && /*#__PURE__*/_jsx(Link, {\n              href: \"/AllRestaurants\",\n              children: \"All restaurants\"\n            }), authCtx.isLoggedIn && authCtx.isBusiness && /*#__PURE__*/_jsx(Link, {\n              href: \"/business\",\n              children: \"Customize Menu\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"li\", {\n          children: authCtx.isLoggedIn && /*#__PURE__*/_jsx(\"span\", {\n            onClick: logoutHandler,\n            children: \"Logout\"\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default Nav;","map":null,"metadata":{},"sourceType":"module"}