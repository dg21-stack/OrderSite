{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\dgaidar\\\\Documents\\\\VScode\\\\React\\\\FoodOrderingSite\\\\components\\\\store\\\\use-context.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Card from \"../Card/Card\";\nconst AuthContext = /*#__PURE__*/React.createContext({\n  token: '',\n  isLoggedIn: false,\n  login: token => {},\n  logout: () => {},\n  items: 0,\n  isOpen: false,\n  currCart: [],\n  toggle: () => {},\n  append: item => {},\n  remove: item => {}\n});\nexport const AuthContextProvider = props => {\n  let token0 = [];\n  let token1 = 0;\n\n  if (false) {\n    const cartData = localStorage.getItem('cart');\n    const itemData = parseInt(localStorage.getItem('item'));\n\n    if (cartData) {\n      token0 = JSON.parse(cartData);\n      console.log(token0);\n    }\n\n    if (itemData) {\n      token1 = itemData;\n    }\n\n    const {\n      0: cart,\n      1: setCart\n    } = useState(token0);\n    const {\n      0: item,\n      1: setItem\n    } = useState(token1);\n    const {\n      0: isOpen,\n      1: setIsOpen\n    } = useState(false);\n\n    const appendHandler = (val, price) => {\n      let a = {};\n\n      for (const object in cart) {\n        if (cart[object].item === val) {\n          setCart(prevState => {\n            prevState[object].amount += 1;\n            prevState[object].total += prevState[object].price;\n            localStorage.setItem('cart', JSON.stringify(prevState));\n            return prevState;\n          });\n          setItem(prevState => {\n            return parseInt(prevState) + 1;\n          });\n          localStorage.setItem('item', parseInt(item) + 1);\n          return;\n        }\n      }\n\n      a = [{\n        amount: 1,\n        total: price,\n        price: price,\n        item: val\n      }];\n      localStorage.setItem('cart', JSON.stringify(a));\n      setCart(prevState => {\n        if (prevState !== undefined) {\n          return [...prevState, {\n            amount: 1,\n            total: price,\n            price: price,\n            item: val\n          }];\n        }\n\n        return [{\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }];\n      });\n      setItem(prevState => {\n        return parseInt(prevState) + 1;\n      });\n      localStorage.setItem('item', parseInt(item) + 1);\n    };\n\n    const removeHandler = val => {\n      for (const object in cart) {\n        console.log(cart[object]);\n        setCart(prevState => {\n          if ((prevState === null || prevState === void 0 ? void 0 : prevState[object]) !== undefined) {\n            if (prevState[object].item === val) {\n              prevState[object].amount -= 1;\n              prevState[object].total -= prevState[object].price;\n              localStorage.setItem('cart', JSON.stringify(prevState));\n              setItem(prevState => {\n                return parseInt(prevState) - 1;\n              });\n              localStorage.setItem('item', parseInt(item) - 1);\n              return prevState;\n            }\n          } else {\n            return prevState;\n          }\n        });\n      }\n    };\n\n    const toggleHandler = () => {\n      setIsOpen(prevState => !prevState);\n    };\n\n    let initialToken;\n    const tokenData = localStorage.getItem('token');\n\n    if (tokenData) {\n      initialToken = tokenData;\n    }\n\n    const {\n      0: token,\n      1: setToken\n    } = useState(initialToken);\n    const userIsLoggedIn = !!token;\n\n    const loginHandler = token => {\n      setToken(token);\n      localStorage.setItem('token', token);\n    };\n\n    const logoutHandler = token => {\n      setToken(null);\n      localStorage.removeItem('token');\n    };\n\n    const contextValue = {\n      token: token,\n      isLoggedIn: userIsLoggedIn,\n      login: loginHandler,\n      logout: logoutHandler,\n      items: item,\n      isOpen: isOpen,\n      currCart: cart,\n      toggle: toggleHandler,\n      append: appendHandler,\n      remove: removeHandler\n    };\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: contextValue,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: AuthContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 12\n  }, this);\n};\nexport default AuthContext;","map":{"version":3,"sources":["C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/components/store/use-context.js"],"names":["React","useEffect","useState","Card","AuthContext","createContext","token","isLoggedIn","login","logout","items","isOpen","currCart","toggle","append","item","remove","AuthContextProvider","props","token0","token1","cartData","localStorage","getItem","itemData","parseInt","JSON","parse","console","log","cart","setCart","setItem","setIsOpen","appendHandler","val","price","a","object","prevState","amount","total","stringify","undefined","removeHandler","toggleHandler","initialToken","tokenData","setToken","userIsLoggedIn","loginHandler","logoutHandler","removeItem","contextValue","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,IAAP,MAAiB,cAAjB;AAEA,MAAMC,WAAW,gBAAGJ,KAAK,CAACK,aAAN,CAAoB;AACpCC,EAAAA,KAAK,EAAE,EAD6B;AAEpCC,EAAAA,UAAU,EAAE,KAFwB;AAGpCC,EAAAA,KAAK,EAAGF,KAAD,IAAW,CAAE,CAHgB;AAIpCG,EAAAA,MAAM,EAAE,MAAM,CAAE,CAJoB;AAKpCC,EAAAA,KAAK,EAAE,CAL6B;AAMpCC,EAAAA,MAAM,EAAE,KAN4B;AAOpCC,EAAAA,QAAQ,EAAE,EAP0B;AAQpCC,EAAAA,MAAM,EAAE,MAAM,CAAE,CARoB;AASpCC,EAAAA,MAAM,EAAGC,IAAD,IAAU,CAAE,CATgB;AAUpCC,EAAAA,MAAM,EAAGD,IAAD,IAAU,CAAE;AAVgB,CAApB,CAApB;AAeA,OAAO,MAAME,mBAAmB,GAAIC,KAAD,IAAW;AAC1C,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,MAAM,GAAG,CAAb;;AACJ,aAAkC;AAC9B,UAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB;AACA,UAAMC,QAAQ,GAAGC,QAAQ,CAACH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAD,CAAzB;;AACA,QAAIF,QAAJ,EAAc;AACVF,MAAAA,MAAM,GAAEO,IAAI,CAACC,KAAL,CAAWN,QAAX,CAAR;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAYV,MAAZ;AACH;;AACD,QAAIK,QAAJ,EAAc;AACVJ,MAAAA,MAAM,GAAGI,QAAT;AACH;;AACD,UAAM;AAAA,SAACM,IAAD;AAAA,SAAOC;AAAP,QAAkB7B,QAAQ,CAACiB,MAAD,CAAhC;AACA,UAAM;AAAA,SAACJ,IAAD;AAAA,SAAOiB;AAAP,QAAkB9B,QAAQ,CAACkB,MAAD,CAAhC;AACA,UAAM;AAAA,SAACT,MAAD;AAAA,SAASsB;AAAT,QAAsB/B,QAAQ,CAAC,KAAD,CAApC;;AAEA,UAAMgC,aAAa,GAAG,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAClC,UAAIC,CAAC,GAAG,EAAR;;AACA,WAAK,MAAMC,MAAX,IAAqBR,IAArB,EAA2B;AACvB,YAAIA,IAAI,CAACQ,MAAD,CAAJ,CAAavB,IAAb,KAAsBoB,GAA1B,EAA+B;AAC3BJ,UAAAA,OAAO,CAAEQ,SAAD,IAAe;AACnBA,YAAAA,SAAS,CAACD,MAAD,CAAT,CAAkBE,MAAlB,IAA4B,CAA5B;AACAD,YAAAA,SAAS,CAACD,MAAD,CAAT,CAAkBG,KAAlB,IAA2BF,SAAS,CAACD,MAAD,CAAT,CAAkBF,KAA7C;AACAd,YAAAA,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA4BN,IAAI,CAACgB,SAAL,CAAeH,SAAf,CAA5B;AACA,mBAAOA,SAAP;AACH,WALM,CAAP;AAMAP,UAAAA,OAAO,CAAEO,SAAD,IAAe;AACnB,mBAAOd,QAAQ,CAACc,SAAD,CAAR,GAAsB,CAA7B;AACH,WAFM,CAAP;AAIAjB,UAAAA,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA6BP,QAAQ,CAACV,IAAD,CAAR,GAAiB,CAA9C;AACA;AACH;AACJ;;AACDsB,MAAAA,CAAC,GAAG,CACA;AACIG,QAAAA,MAAM,EAAE,CADZ;AAEIC,QAAAA,KAAK,EAAEL,KAFX;AAGIA,QAAAA,KAAK,EAAEA,KAHX;AAIIrB,QAAAA,IAAI,EAAEoB;AAJV,OADA,CAAJ;AAQAb,MAAAA,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA4BN,IAAI,CAACgB,SAAL,CAAeL,CAAf,CAA5B;AACAN,MAAAA,OAAO,CAAEQ,SAAD,IAAe;AACnB,YAAKA,SAAS,KAAKI,SAAnB,EAA6B;AAC7B,iBAAO,CAAE,GAAGJ,SAAL,EACH;AACIC,YAAAA,MAAM,EAAE,CADZ;AAEIC,YAAAA,KAAK,EAAEL,KAFX;AAGIA,YAAAA,KAAK,EAAEA,KAHX;AAIIrB,YAAAA,IAAI,EAAEoB;AAJV,WADG,CAAP;AAQH;;AACD,eAAO,CACH;AAEIK,UAAAA,MAAM,EAAE,CAFZ;AAGIC,UAAAA,KAAK,EAAEL,KAHX;AAIIA,UAAAA,KAAK,EAAEA,KAJX;AAKIrB,UAAAA,IAAI,EAAEoB;AALV,SADG,CAAP;AAUC,OArBM,CAAP;AAsBAH,MAAAA,OAAO,CAAEO,SAAD,IAAe;AACnB,eAAOd,QAAQ,CAACc,SAAD,CAAR,GAAsB,CAA7B;AACH,OAFM,CAAP;AAGAjB,MAAAA,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA6BP,QAAQ,CAACV,IAAD,CAAR,GAAiB,CAA9C;AAEH,KAtDD;;AAuDA,UAAM6B,aAAa,GAAIT,GAAD,IAAS;AAC3B,WAAK,MAAMG,MAAX,IAAqBR,IAArB,EAA0B;AACtBF,QAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACQ,MAAD,CAAhB;AACIP,QAAAA,OAAO,CAAEQ,SAAD,IAAe;AACnB,cAAI,CAAAA,SAAS,SAAT,IAAAA,SAAS,WAAT,YAAAA,SAAS,CAAGD,MAAH,CAAT,MAAwBK,SAA5B,EAAsC;AACtC,gBAAIJ,SAAS,CAACD,MAAD,CAAT,CAAkBvB,IAAlB,KAA2BoB,GAA/B,EAAmC;AACnCI,cAAAA,SAAS,CAACD,MAAD,CAAT,CAAkBE,MAAlB,IAA4B,CAA5B;AACAD,cAAAA,SAAS,CAACD,MAAD,CAAT,CAAkBG,KAAlB,IAA2BF,SAAS,CAACD,MAAD,CAAT,CAAkBF,KAA7C;AAEAd,cAAAA,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA4BN,IAAI,CAACgB,SAAL,CAAeH,SAAf,CAA5B;AAGAP,cAAAA,OAAO,CAAEO,SAAD,IAAe;AACnB,uBAAOd,QAAQ,CAACc,SAAD,CAAR,GAAsB,CAA7B;AACH,eAFM,CAAP;AAIAjB,cAAAA,YAAY,CAACU,OAAb,CAAqB,MAArB,EAA6BP,QAAQ,CAACV,IAAD,CAAR,GAAiB,CAA9C;AACA,qBAAOwB,SAAP;AAGH;AACJ,WAjBO,MAkBC;AACD,mBAAOA,SAAP;AACH;AACA,SAtBM,CAAP;AAwBP;AACJ,KA5BD;;AA6BA,UAAMM,aAAa,GAAG,MAAM;AACxBZ,MAAAA,SAAS,CAACM,SAAS,IAAI,CAACA,SAAf,CAAT;AACH,KAFD;;AAIA,QAAIO,YAAJ;AAGA,UAAMC,SAAS,GAAGzB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlB;;AAEA,QAAIwB,SAAJ,EAAc;AACVD,MAAAA,YAAY,GAAGC,SAAf;AACH;;AACD,UAAM;AAAA,SAACzC,KAAD;AAAA,SAAQ0C;AAAR,QAAoB9C,QAAQ,CAAC4C,YAAD,CAAlC;AAEA,UAAMG,cAAc,GAAG,CAAC,CAAC3C,KAAzB;;AAEA,UAAM4C,YAAY,GAAI5C,KAAD,IAAW;AAC5B0C,MAAAA,QAAQ,CAAC1C,KAAD,CAAR;AACAgB,MAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA6B1B,KAA7B;AACH,KAHD;;AAIA,UAAM6C,aAAa,GAAI7C,KAAD,IAAW;AAC7B0C,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA1B,MAAAA,YAAY,CAAC8B,UAAb,CAAwB,OAAxB;AACH,KAHD;;AAIA,UAAMC,YAAY,GAAG;AACjB/C,MAAAA,KAAK,EAAEA,KADU;AAEjBC,MAAAA,UAAU,EAAE0C,cAFK;AAGjBzC,MAAAA,KAAK,EAAE0C,YAHU;AAIjBzC,MAAAA,MAAM,EAAE0C,aAJS;AAKjBzC,MAAAA,KAAK,EAAEK,IALU;AAMjBJ,MAAAA,MAAM,EAAEA,MANS;AAOjBC,MAAAA,QAAQ,EAAEkB,IAPO;AAQjBjB,MAAAA,MAAM,EAAEgC,aARS;AASjB/B,MAAAA,MAAM,EAAEoB,aATS;AAUjBlB,MAAAA,MAAM,EAAE4B;AAVS,KAArB;AAYA,wBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAIS,YAA/B;AAAA,gBACFnC,KAAK,CAACoC;AADJ;AAAA;AAAA;AAAA;AAAA,YAAP;AAGC;;AACD,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAIlD,WAA/B;AAAA,cACHc,KAAK,CAACoC;AADH;AAAA;AAAA;AAAA;AAAA,UAAP;AAGH,CAhJM;AAiJP,eAAelD,WAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Card from \"../Card/Card\";\r\n\r\nconst AuthContext = React.createContext({\r\n    token: '',\r\n    isLoggedIn: false,\r\n    login: (token) => {},\r\n    logout: () => {},\r\n    items: 0,\r\n    isOpen: false,\r\n    currCart: [],\r\n    toggle: () => {},\r\n    append: (item) => {},\r\n    remove: (item) => {}\r\n});\r\n\r\n\r\n\r\nexport const AuthContextProvider = (props) => {\r\n    let token0 = [];\r\n    let token1 = 0;\r\nif (typeof window !== 'undefined'){\r\n    const cartData = localStorage.getItem('cart');\r\n    const itemData = parseInt(localStorage.getItem('item'));\r\n    if (cartData) {\r\n        token0 =JSON.parse(cartData);\r\n        console.log(token0);\r\n    }\r\n    if (itemData) {\r\n        token1 = itemData; \r\n    }\r\n    const [cart, setCart] = useState(token0);\r\n    const [item, setItem] = useState(token1);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n   \r\n    const appendHandler = (val, price) => {\r\n        let a = {}\r\n        for (const object in cart) {\r\n            if (cart[object].item === val) {\r\n                setCart((prevState) => {\r\n                    prevState[object].amount += 1;\r\n                    prevState[object].total += prevState[object].price;\r\n                    localStorage.setItem('cart',JSON.stringify(prevState));\r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    return parseInt(prevState) + 1;\r\n                })\r\n                \r\n                localStorage.setItem('item', parseInt(item) + 1);\r\n                return;\r\n            }\r\n        }\r\n        a = [\r\n            {\r\n                amount: 1,\r\n                total: price,\r\n                price: price,\r\n                item: val\r\n            }\r\n        ]\r\n        localStorage.setItem('cart',JSON.stringify(a));\r\n        setCart((prevState) => {\r\n            if  (prevState !== undefined){\r\n            return [ ...prevState,\r\n                {\r\n                    amount: 1,\r\n                    total: price,\r\n                    price: price,\r\n                    item: val\r\n                }\r\n            ]\r\n        } \r\n        return [\r\n            {\r\n                \r\n                amount: 1,\r\n                total: price,\r\n                price: price,\r\n                item: val\r\n            \r\n            }\r\n        ]\r\n        })\r\n        setItem((prevState) => {\r\n            return parseInt(prevState) + 1; \r\n        })\r\n        localStorage.setItem('item', parseInt(item) + 1);\r\n \r\n    }\r\n    const removeHandler = (val) => {\r\n        for (const object in cart){\r\n            console.log(cart[object]);\r\n                setCart((prevState) => {\r\n                    if (prevState?.[object] !== undefined){\r\n                    if (prevState[object].item === val){\r\n                    prevState[object].amount -= 1;\r\n                    prevState[object].total -= prevState[object].price;\r\n                    \r\n                    localStorage.setItem('cart',JSON.stringify(prevState));\r\n                \r\n                 \r\n                    setItem((prevState) => {\r\n                        return parseInt(prevState) - 1;\r\n                    })\r\n                    \r\n                    localStorage.setItem('item', parseInt(item) - 1);\r\n                    return prevState;\r\n                    \r\n                \r\n                }\r\n            }\r\n                else {\r\n                    return prevState;\r\n                }\r\n                })\r\n                \r\n        }\r\n    }\r\n    const toggleHandler = () => {\r\n        setIsOpen(prevState => !prevState);\r\n    }\r\n\r\n    let initialToken;\r\n    \r\n  \r\n    const tokenData = localStorage.getItem('token');\r\n\r\n    if (tokenData){\r\n        initialToken = tokenData;\r\n    }\r\n    const [token ,setToken] = useState(initialToken);\r\n\r\n    const userIsLoggedIn = !!token;\r\n\r\n    const loginHandler = (token) => {\r\n        setToken(token);\r\n        localStorage.setItem('token',token);\r\n    };\r\n    const logoutHandler = (token) => {\r\n        setToken(null);\r\n        localStorage.removeItem('token');\r\n    }\r\n    const contextValue = {\r\n        token: token,\r\n        isLoggedIn: userIsLoggedIn,\r\n        login: loginHandler,\r\n        logout: logoutHandler,\r\n        items: item,\r\n        isOpen: isOpen,\r\n        currCart: cart,\r\n        toggle: toggleHandler,\r\n        append: appendHandler,\r\n        remove: removeHandler\r\n    };\r\n    return <AuthContext.Provider value = {contextValue}>\r\n        {props.children}\r\n    </AuthContext.Provider>\r\n    }\r\n    return <AuthContext.Provider value = {AuthContext}>\r\n       {props.children}\r\n</AuthContext.Provider>\r\n}\r\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}