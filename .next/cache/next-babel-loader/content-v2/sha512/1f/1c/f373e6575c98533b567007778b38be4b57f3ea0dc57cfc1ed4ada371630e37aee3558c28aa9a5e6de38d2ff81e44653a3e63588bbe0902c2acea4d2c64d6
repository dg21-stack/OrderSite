{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\dgaidar\\\\Documents\\\\VScode\\\\React\\\\FoodOrderingSite\\\\components\\\\store\\\\use-context.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Card from \"../Card/Card\";\nconst AuthContext = /*#__PURE__*/React.createContext({\n  token: '',\n  isLoggedIn: false,\n  login: (token, firstName, lastName, business) => {},\n  logout: () => {},\n  user: '',\n  isBusiness: false,\n  items: 0,\n  totalPrice: 0,\n  isOpen: false,\n  currCart: [],\n  menu: [],\n  reviewList: [],\n  pushReviews: item => {},\n  toggle: () => {},\n  append: item => {},\n  remove: item => {},\n  checkout: () => {},\n  pushMenu: item => {},\n  findIndex: name => {}\n});\nexport const AuthContextProvider = props => {\n  let token0 = [];\n  let token1 = 0;\n  let token2 = 0;\n  let token3 = '';\n  let token4 = false;\n  let token5 = [];\n  let token6 = [];\n\n  if (false) {\n    const cartData = localStorage.getItem('cart');\n    const itemData = parseInt(localStorage.getItem('item'));\n    const priceData = parseInt(localStorage.getItem('total'));\n    const userData = localStorage.getItem('user');\n    const businessData = localStorage.getItem('business');\n    const menuData = localStorage.getItem('menu');\n    const reviewData = localStorage.getItem('review');\n\n    if (reviewData) {\n      token6 = JSON.parse(reviewData);\n    }\n\n    if (cartData) {\n      token0 = JSON.parse(cartData);\n    }\n\n    if (itemData) {\n      token1 = itemData;\n    }\n\n    if (priceData) {\n      token2 = priceData;\n    }\n\n    if (userData) {\n      token3 = userData;\n    }\n\n    token4 = businessData === 'true';\n\n    if (menuData) {\n      token5 = JSON.parse(menuData);\n    }\n\n    const {\n      0: cart,\n      1: setCart\n    } = useState(token0);\n    const {\n      0: item,\n      1: setItem\n    } = useState(token1);\n    const {\n      0: isOpen,\n      1: setIsOpen\n    } = useState(false);\n    const {\n      0: totalAmt,\n      1: setTotalAmt\n    } = useState(token2);\n    const {\n      0: name,\n      1: setName\n    } = useState(token3);\n    const {\n      0: isBusiness,\n      1: setIsBusiness\n    } = useState(token4);\n    const {\n      0: menu,\n      1: setMenu\n    } = useState(token5);\n    const {\n      0: review,\n      1: setReview\n    } = useState(token6);\n\n    const menuHandler = m => {\n      setMenu(m);\n      localStorage.setItem('menu', JSON.stringify(m));\n    };\n\n    const reviewHandler = r => {\n      setReview(r);\n      localStorage.setItem('review', JSON.stringify(r));\n    };\n\n    const findIndex = name => {\n      for (let values in cart) {\n        if (cart[values].item === name) {\n          return values;\n        }\n      }\n\n      return false;\n    };\n\n    const appendHandler = (val, price) => {\n      let a = [];\n\n      for (const object in cart) {\n        if (cart[object].item === val) {\n          setCart(prevState => {\n            prevState[object].amount += 1;\n            prevState[object].total += prevState[object].price;\n            localStorage.setItem('cart', JSON.stringify(prevState));\n            return prevState;\n          });\n          setItem(prevState => {\n            return parseInt(prevState) + 1;\n          });\n          setTotalAmt(prevState => {\n            return prevState + cart[object].price;\n          });\n          localStorage.setItem('item', parseInt(item) + 1);\n          localStorage.setItem('total', parseInt(totalAmt) + cart[object].price);\n          return;\n        }\n      }\n\n      a = [{\n        amount: 1,\n        total: price,\n        price: price,\n        item: val\n      }];\n      setCart(prevState => {\n        if (prevState !== undefined) {\n          prevState = [...prevState, {\n            amount: 1,\n            total: price,\n            price: price,\n            item: val\n          }];\n          localStorage.setItem('cart', JSON.stringify(prevState));\n          return prevState;\n        }\n\n        localStorage.setItem('cart', JSON.stringify([{\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }]));\n        return [{\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }];\n      });\n      setItem(prevState => {\n        return parseInt(prevState) + 1;\n      });\n      localStorage.setItem('item', parseInt(item) + 1);\n      localStorage.setItem('total', parseInt(totalAmt) + price);\n      setTotalAmt(prevState => {\n        return prevState + price;\n      });\n    };\n\n    const removeHandler = val => {\n      let a = 0;\n\n      for (const object in cart) {\n        if (cart[object].item === val) {\n          setCart(prevState => {\n            a = prevState[object].amount;\n\n            if (prevState[object].amount !== 0) {\n              prevState[object].amount -= 1;\n              prevState[object].total -= prevState[object].price;\n              localStorage.setItem('cart', JSON.stringify(prevState));\n              return prevState;\n            }\n\n            return prevState;\n          });\n          setItem(prevState => {\n            if (cart[object].item != 1) {\n              return parseInt(prevState) - 1;\n            }\n\n            return prevState;\n          });\n\n          if (cart[object].item != 1) {\n            localStorage.setItem('total', parseInt(totalAmt) - cart[object].price);\n            setTotalAmt(prevState => prevState - cart[object].price);\n            localStorage.setItem('item', parseInt(item) - 1);\n          }\n\n          return;\n        }\n      }\n    };\n\n    const toggleHandler = () => {\n      setIsOpen(prevState => !prevState);\n    };\n\n    let initialToken;\n    const tokenData = localStorage.getItem('token');\n\n    if (tokenData) {\n      initialToken = tokenData;\n    }\n\n    const {\n      0: token,\n      1: setToken\n    } = useState(initialToken);\n    const userIsLoggedIn = !!token;\n\n    const loginHandler = (token, firstName, lastName, business) => {\n      setToken(token);\n      setName(firstName + ' ' + lastName);\n      localStorage.setItem('token', token);\n      setIsBusiness(business);\n      localStorage.setItem('business', business.toString());\n      localStorage.setItem('user', firstName + ' ' + lastName);\n    };\n\n    const logoutHandler = token => {\n      setToken(null);\n      localStorage.removeItem('token');\n      localStorage.clear();\n      setCart([]);\n      setTotalAmt(0);\n      setIsBusiness(null);\n      setItem(0);\n      setToken('');\n      setName('');\n      setMenu([]);\n    };\n\n    const checkoutHandler = () => {\n      setTotalAmt(0);\n      setItem(0);\n      setCart(prevValue => {\n        for (let value in prevValue) {\n          prevValue[value].amount -= prevValue[value].amount;\n          prevValue[value].total -= prevValue[value].total;\n        }\n\n        localStorage.setItem('cart', JSON.stringify(prevValue));\n        return prevValue;\n      });\n      localStorage.setItem('total', 0);\n      localStorage.setItem('item', 0);\n    };\n\n    const contextValue = {\n      token: token,\n      isLoggedIn: userIsLoggedIn,\n      login: loginHandler,\n      logout: logoutHandler,\n      user: name,\n      items: item,\n      isOpen: isOpen,\n      isBusiness: isBusiness,\n      currCart: cart,\n      totalprice: totalAmt,\n      pushReviews: reviewHandler,\n      reviewList: review,\n      menu: menu,\n      toggle: toggleHandler,\n      append: appendHandler,\n      remove: removeHandler,\n      checkout: checkoutHandler,\n      pushMenu: menuHandler,\n      findIndex: findIndex\n    };\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: contextValue,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: AuthContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 266,\n    columnNumber: 12\n  }, this);\n};\nexport default AuthContext;","map":{"version":3,"sources":["C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/components/store/use-context.js"],"names":["React","useEffect","useState","Card","AuthContext","createContext","token","isLoggedIn","login","firstName","lastName","business","logout","user","isBusiness","items","totalPrice","isOpen","currCart","menu","reviewList","pushReviews","item","toggle","append","remove","checkout","pushMenu","findIndex","name","AuthContextProvider","props","token0","token1","token2","token3","token4","token5","token6","cartData","localStorage","getItem","itemData","parseInt","priceData","userData","businessData","menuData","reviewData","JSON","parse","cart","setCart","setItem","setIsOpen","totalAmt","setTotalAmt","setName","setIsBusiness","setMenu","review","setReview","menuHandler","m","stringify","reviewHandler","r","values","appendHandler","val","price","a","object","prevState","amount","total","undefined","removeHandler","toggleHandler","initialToken","tokenData","setToken","userIsLoggedIn","loginHandler","toString","logoutHandler","removeItem","clear","checkoutHandler","prevValue","value","contextValue","totalprice","children"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Card from \"../Card/Card\";\r\n\r\nconst AuthContext = React.createContext({\r\n    token: '',\r\n    isLoggedIn: false,\r\n    login: (token, firstName, lastName, business) => {},\r\n    logout: () => {},\r\n    user: '',\r\n    isBusiness: false,\r\n    items: 0,\r\n    totalPrice: 0,\r\n    isOpen: false,\r\n    currCart: [],\r\n    menu: [], \r\n    reviewList: [],\r\n    pushReviews: (item) => {},\r\n    toggle: () => {},\r\n    append: (item) => {},\r\n    remove: (item) => {},\r\n    checkout: () => {},\r\n    pushMenu: (item) => {},\r\n    findIndex: (name) => {}\r\n});\r\n\r\n\r\n\r\nexport const AuthContextProvider = (props) => {\r\n    let token0 = [];\r\n    let token1 = 0;\r\n    let token2 = 0;\r\n    let token3 = '';\r\n    let token4 = false;\r\n    let token5 = [];\r\n    let token6 = [];\r\n\r\nif (typeof window !== 'undefined'){\r\n    const cartData = localStorage.getItem('cart');\r\n    const itemData = parseInt(localStorage.getItem('item'));\r\n    const priceData = parseInt(localStorage.getItem('total'));\r\n    const userData = localStorage.getItem('user');\r\n    const businessData = localStorage.getItem('business');\r\n    const menuData = localStorage.getItem('menu');\r\n    const reviewData = localStorage.getItem('review');\r\n    if (reviewData) {\r\n        token6 = JSON.parse(reviewData);\r\n    }\r\n    if (cartData) {\r\n        token0 =JSON.parse(cartData);\r\n    }\r\n    if (itemData) {\r\n        token1 = itemData; \r\n    }\r\n    if (priceData) {\r\n        token2 = priceData; \r\n    }\r\n    if (userData) {\r\n        token3 = userData;\r\n    }\r\n   \r\n    token4 = (businessData === 'true')\r\n \r\n    if (menuData) {\r\n       token5 = JSON.parse(menuData)\r\n    }\r\n    const [cart, setCart] = useState(token0);\r\n    const [item, setItem] = useState(token1);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [totalAmt, setTotalAmt] = useState(token2);\r\n    const  [name, setName] = useState(token3);\r\n    const [isBusiness, setIsBusiness] = useState(token4);\r\n    const [menu, setMenu] = useState(token5)\r\n    const [review, setReview] =useState(token6);\r\n\r\n    const menuHandler = (m) => {\r\n        setMenu(m);\r\n        localStorage.setItem('menu',JSON.stringify(m));\r\n    }\r\n    const reviewHandler = (r) => {\r\n        setReview(r);\r\n        localStorage.setItem('review',JSON.stringify(r));\r\n    }\r\n    const findIndex = (name) => {\r\n        for (let values in cart){\r\n            if (cart[values].item === name) {\r\n                return values;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    const appendHandler = (val, price) => {\r\n        let a = []\r\n        for (const object in cart) {\r\n\r\n            if (cart[object].item === val) {\r\n                setCart((prevState) => {\r\n                    prevState[object].amount += 1;\r\n                    prevState[object].total += prevState[object].price;\r\n                    localStorage.setItem('cart',JSON.stringify(prevState));\r\n                  \r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    return parseInt(prevState) + 1;\r\n                })\r\n                \r\n                setTotalAmt(prevState => {return prevState + cart[object].price});\r\n                localStorage.setItem('item', parseInt(item) + 1);\r\n                localStorage.setItem('total',parseInt(totalAmt) + cart[object].price);\r\n                return;\r\n            }\r\n        }\r\n        a = [\r\n            {\r\n                amount: 1,\r\n                total: price,\r\n                price: price,\r\n                item: val\r\n            }\r\n        ]\r\n       \r\n        setCart((prevState) => {\r\n            if  (prevState !== undefined){\r\n                prevState = [...prevState , {\r\n                    amount: 1,\r\n                    total: price,\r\n                    price: price,\r\n                    item: val\r\n                }]\r\n                localStorage.setItem('cart',JSON.stringify(prevState));\r\n                return prevState;\r\n        } \r\n        localStorage.setItem('cart',JSON.stringify([{\r\n            amount: 1,\r\n            total: price,\r\n            price: price,\r\n            item: val\r\n        }]));\r\n        return [\r\n            {\r\n                \r\n                amount: 1,\r\n                total: price,\r\n                price: price,\r\n                item: val\r\n            \r\n            }\r\n        ]\r\n        })\r\n        setItem((prevState) => {\r\n            return parseInt(prevState) + 1; \r\n        })\r\n        localStorage.setItem('item', parseInt(item) + 1);\r\n        localStorage.setItem('total',parseInt(totalAmt) + price);\r\n        setTotalAmt(prevState => {return prevState + price});\r\n\r\n \r\n    }\r\n    const removeHandler = (val) => {\r\n        let a = 0\r\n        for (const object in cart){\r\n            if (cart[object].item === val) {\r\n                setCart((prevState) => {\r\n                    a = prevState[object].amount;\r\n                    if (prevState[object].amount !== 0) {\r\n                    prevState[object].amount -= 1;\r\n                    prevState[object].total -= prevState[object].price;\r\n                    localStorage.setItem('cart',JSON.stringify(prevState));\r\n                    return prevState;\r\n                    }\r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    if (cart[object].item != 1){\r\n                    return parseInt(prevState) - 1;\r\n                    }\r\n                    return prevState;\r\n                })\r\n                if (cart[object].item != 1){\r\n                localStorage.setItem('total',parseInt(totalAmt) - cart[object].price);\r\n                setTotalAmt(prevState =>  prevState - cart[object].price);\r\n                localStorage.setItem('item', parseInt(item) - 1);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    const toggleHandler = () => {\r\n        setIsOpen(prevState => !prevState);\r\n    }\r\n\r\n    let initialToken;\r\n    \r\n  \r\n    const tokenData = localStorage.getItem('token');\r\n\r\n    if (tokenData){\r\n        initialToken = tokenData;\r\n    }\r\n    const [token ,setToken] = useState(initialToken);\r\n\r\n    const userIsLoggedIn = !!token;\r\n\r\n    const loginHandler = (token, firstName, lastName, business) => {\r\n        setToken(token);\r\n        setName(firstName + ' ' + lastName);\r\n        localStorage.setItem('token',token);\r\n        setIsBusiness(business);\r\n        localStorage.setItem('business',business.toString());\r\n        localStorage.setItem('user',firstName + ' ' + lastName);\r\n    };\r\n    const logoutHandler = (token) => {\r\n        setToken(null);\r\n        localStorage.removeItem('token');\r\n        localStorage.clear();\r\n        setCart([]);\r\n        setTotalAmt(0);\r\n        setIsBusiness(null);\r\n        setItem(0);\r\n        setToken('');\r\n        setName('');\r\n        setMenu([]);\r\n    }\r\n    const checkoutHandler = () => {\r\n       setTotalAmt(0);\r\n        setItem(0);\r\n        setCart(prevValue => \r\n            {\r\n                for (let value in prevValue){\r\n                    prevValue[value].amount -= prevValue[value].amount;\r\n                    prevValue[value].total -= prevValue[value].total; \r\n                    \r\n                }\r\n                localStorage.setItem('cart', JSON.stringify(prevValue));\r\n                return prevValue\r\n            })\r\n      localStorage.setItem('total',0);\r\n      localStorage.setItem('item', 0);\r\n     \r\n    }\r\n    const contextValue = {\r\n        token: token,\r\n        isLoggedIn: userIsLoggedIn,\r\n        login: loginHandler,\r\n        logout: logoutHandler,\r\n        user: name,\r\n        items: item,\r\n        isOpen: isOpen,\r\n        isBusiness: isBusiness,\r\n        currCart: cart,\r\n        totalprice: totalAmt,\r\n        pushReviews: reviewHandler,\r\n        reviewList: review,\r\n        menu: menu,\r\n        toggle: toggleHandler,\r\n        append: appendHandler,\r\n        remove: removeHandler,\r\n        checkout: checkoutHandler,\r\n        pushMenu: menuHandler,\r\n        findIndex: findIndex\r\n    };\r\n    return <AuthContext.Provider value = {contextValue}>\r\n        {props.children}\r\n    </AuthContext.Provider>\r\n    }\r\n    return <AuthContext.Provider value = {AuthContext}>\r\n       {props.children}\r\n</AuthContext.Provider>\r\n}\r\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}