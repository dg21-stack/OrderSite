{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/gaida/Documents/React/FoodOrderingSite/node_modules/@babel/runtime/regenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"C:/Users/gaida/Documents/React/FoodOrderingSite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport classes from './Nav.module.css';\nimport Link from 'next/link';\nimport { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../store/use-context';\nimport router, { useRouter } from 'next/router';\nimport ResCard from './ResCard';\n\nvar Nav = function Nav() {\n  var authCtx = useContext(AuthContext);\n  var router = useRouter();\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      currText = _useState2[0],\n      setCurrText = _useState2[1];\n\n  var _useState3 = useState([]),\n      currSearch = _useState3[0],\n      setCurrSearch = _useState3[1];\n\n  var _useState4 = useState(false),\n      showSearch = _useState4[0],\n      setShowSearch = _useState4[1];\n\n  function getter(_x) {\n    return _getter.apply(this, arguments);\n  }\n\n  function _getter() {\n    _getter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      var response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.next = 3;\n              return fetch(\"../api/getResListHandler?name=\".concat(value), {\n                method: 'GET'\n              });\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return response.json();\n\n            case 6:\n              data = _context.sent;\n              setCurrSearch(data[0].data);\n              setIsLoading(false);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getter.apply(this, arguments);\n  }\n\n  var clearSearch = function clearSearch() {\n    setCurrText('');\n    setCurrSearch([]);\n    setShowSearch(false);\n  };\n\n  useEffect(function () {\n    var identifier = setTimeout(function () {\n      console.log('this is on a timer', currText);\n\n      if (currText.length > 0) {\n        getter(currText);\n        console.log(currSearch);\n\n        if (!showSearch) {\n          setShowSearch(true);\n        }\n      }\n    }, 500);\n    return function () {\n      clearTimeout(identifier);\n    };\n  }, [currText]);\n\n  var logoutHandler = function logoutHandler() {\n    authCtx.logout();\n    router.push('/');\n  };\n\n  var cartHandler = function cartHandler() {\n    authCtx.toggle();\n  };\n\n  var textHandler = function textHandler(e) {\n    setCurrText(e.target.value);\n\n    if (e.target.value == '' && showSearch) {\n      setShowSearch(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"header\", {\n    className: classes.header,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: classes.logo,\n      children: /*#__PURE__*/_jsx(Link, {\n        href: \"/\",\n        children: \"ReactEats\"\n      })\n    }), authCtx.isLoggedIn && !authCtx.isBusiness && window.location.pathname != '/AllRestaurants/search' && /*#__PURE__*/_jsxs(\"button\", {\n      onClick: cartHandler,\n      className: classes.navButton,\n      children: [\"\\uD83D\\uDED2 Your Cart  \", /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.cart,\n        children: [\" \", authCtx.items]\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      children: authCtx.isLoggedIn && !authCtx.isBusiness && window.location.pathname != '/AllRestaurants/search' && /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.inputContainer,\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          className: showSearch ? \"\".concat(classes.input, \" \").concat(classes.on) : classes.input,\n          onInput: textHandler,\n          value: currText,\n          placeholder: \"Find Restaurant\"\n        }), showSearch && currSearch.length != 0 && /*#__PURE__*/_jsx(ResCard, {\n          isLoading: isLoading,\n          clear: clearSearch,\n          search: currText,\n          restaurants: currSearch\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"nav\", {\n      children: /*#__PURE__*/_jsxs(\"ul\", {\n        children: [/*#__PURE__*/_jsx(\"li\", {\n          children: /*#__PURE__*/_jsxs(\"span\", {\n            children: [authCtx.isLoggedIn && !authCtx.isBusiness && /*#__PURE__*/_jsx(Link, {\n              href: \"/AllRestaurants\",\n              children: \"All restaurants\"\n            }), authCtx.isLoggedIn && authCtx.isBusiness && /*#__PURE__*/_jsx(Link, {\n              href: \"/business\",\n              children: \"Customize Menu\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"li\", {\n          children: authCtx.isLoggedIn && /*#__PURE__*/_jsx(\"span\", {\n            onClick: logoutHandler,\n            children: \"Logout\"\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default Nav;","map":null,"metadata":{},"sourceType":"module"}