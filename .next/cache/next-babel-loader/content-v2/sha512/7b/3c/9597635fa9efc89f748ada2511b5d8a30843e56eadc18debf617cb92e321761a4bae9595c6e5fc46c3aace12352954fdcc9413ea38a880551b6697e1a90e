{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _readOnlyError from \"C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dgaidar\\\\Documents\\\\VScode\\\\React\\\\FoodOrderingSite\\\\components\\\\store\\\\use-context.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Card from \"../Card/Card\";\nvar AuthContext = /*#__PURE__*/React.createContext({\n  token: '',\n  isLoggedIn: false,\n  login: function login(token) {},\n  logout: function logout() {},\n  items: 0,\n  isOpen: false,\n  currCart: [],\n  toggle: function toggle() {},\n  append: function append(item) {},\n  remove: function remove(item) {}\n});\nexport var AuthContextProvider = function AuthContextProvider(props) {\n  _s();\n\n  var token = {};\n  var token1 = 0;\n\n  if (true) {\n    var cartData = localStorage.getItem('cart');\n    var itemData = localStorage.getItem('item');\n\n    if (cartData) {\n      _token = (_readOnlyError(\"token\"), cartData);\n    }\n\n    if (itemData) {\n      token1 = itemData;\n    }\n\n    var _useState = useState(_token),\n        cart = _useState[0],\n        setCart = _useState[1];\n\n    var _useState2 = useState(token1),\n        item = _useState2[0],\n        setItem = _useState2[1];\n\n    var _useState3 = useState(false),\n        isOpen = _useState3[0],\n        setIsOpen = _useState3[1];\n\n    var appendHandler = function appendHandler(val, price) {\n      var a = {};\n\n      for (object in cart) {\n        if (object.item === val) {\n          setCart(function (prevState) {\n            prevState.object.amount += 1;\n            prevState.object.total += prevState.object.price;\n            localStorage.setItem('cart', prevState);\n            return prevState;\n          });\n          setItem(function (prevState) {\n            return prevState + 1;\n          });\n          localStorage.setItem('item', item + 1);\n          return;\n        }\n      }\n\n      setCart(function (prevState) {\n        localStorage.setItem('cart', [{\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }]);\n        return [{\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }];\n      });\n      setItem(function (prevState) {\n        return prevState + 1;\n      });\n      localStorage.setItem('item', item + 1);\n    };\n\n    var removeHandler = function removeHandler(val) {\n      for (object in cart) {\n        if (object.item === val) {\n          setCart(function (prevState) {\n            prevState.val.amount -= 1;\n            prevState.object.total -= prevState.object.price;\n\n            if (prevState.val.amount === 0) {\n              prevState.splice(object, 1);\n            }\n\n            return prevState;\n            setItem(function (prevState) {\n              return prevState - 1;\n            });\n            return;\n          });\n        }\n      }\n    };\n\n    var toggleHandler = function toggleHandler() {\n      setIsOpen(function (prevState) {\n        return !prevState;\n      });\n    };\n\n    var initialToken;\n    var tokenData = localStorage.getItem('token');\n\n    if (tokenData) {\n      initialToken = tokenData;\n    }\n\n    var _useState4 = useState(initialToken),\n        _token = _useState4[0],\n        setToken = _useState4[1];\n\n    var userIsLoggedIn = !!_token;\n\n    var loginHandler = function loginHandler(token) {\n      setToken(token);\n      localStorage.setItem('token', token);\n    };\n\n    var logoutHandler = function logoutHandler(token) {\n      setToken(null);\n      localStorage.removeItem('token');\n    };\n\n    var contextValue = {\n      token: _token,\n      isLoggedIn: userIsLoggedIn,\n      login: loginHandler,\n      logout: logoutHandler,\n      items: item,\n      isOpen: isOpen,\n      currCart: cart,\n      toggle: toggleHandler,\n      append: appendHandler,\n      remove: removeHandler\n    };\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: contextValue,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 12\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: AuthContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 12\n  }, _this);\n};\n\n_s(AuthContextProvider, \"DoWbneWDpDcjoHAtHAFmdWf2MtU=\");\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/components/store/use-context.js"],"names":["React","useEffect","useState","Card","AuthContext","createContext","token","isLoggedIn","login","logout","items","isOpen","currCart","toggle","append","item","remove","AuthContextProvider","props","token1","cartData","localStorage","getItem","itemData","cart","setCart","setItem","setIsOpen","appendHandler","val","price","a","object","prevState","amount","total","removeHandler","splice","toggleHandler","initialToken","tokenData","setToken","userIsLoggedIn","loginHandler","logoutHandler","removeItem","contextValue","children"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Card from \"../Card/Card\";\r\n\r\nconst AuthContext = React.createContext({\r\n    token: '',\r\n    isLoggedIn: false,\r\n    login: (token) => {},\r\n    logout: () => {},\r\n    items: 0,\r\n    isOpen: false,\r\n    currCart: [],\r\n    toggle: () => {},\r\n    append: (item) => {},\r\n    remove: (item) => {}\r\n});\r\n\r\n\r\n\r\nexport const AuthContextProvider = (props) => {\r\n    let token = {};\r\n    let token1 = 0;\r\nif (typeof window !== 'undefined'){\r\n    const cartData = localStorage.getItem('cart');\r\n    const itemData = localStorage.getItem('item');\r\n    if (cartData) {\r\n        token = cartData;\r\n    }\r\n    if (itemData) {\r\n        token1 = itemData; \r\n    }\r\n    const [cart, setCart] = useState(token);\r\n    const [item, setItem] = useState(token1);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const appendHandler = (val, price) => {\r\n        let a = {}\r\n        for (object in cart) {\r\n            if (object.item === val) {\r\n                setCart((prevState) => {\r\n                    prevState.object.amount += 1;\r\n                    prevState.object.total += prevState.object.price;\r\n \r\n                    localStorage.setItem('cart',prevState);\r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    return prevState + 1;\r\n                })\r\n                \r\n                localStorage.setItem('item', item + 1);\r\n                return;\r\n            }\r\n        }\r\n        setCart((prevState) => {\r\n           \r\n            localStorage.setItem('cart',[\r\n                {\r\n                    amount: 1,\r\n                    total: price,\r\n                    price: price,\r\n                    item: val\r\n                }\r\n            ]);\r\n            return [\r\n                {\r\n                    amount: 1,\r\n                    total: price,\r\n                    price: price,\r\n                    item: val\r\n                }\r\n            ]\r\n        })\r\n        setItem((prevState) => {\r\n            return prevState + 1; \r\n        })\r\n        localStorage.setItem('item', item + 1);\r\n \r\n    }\r\n    const removeHandler = (val) => {\r\n        for (object in cart){\r\n            if (object.item === val){\r\n                setCart((prevState) => {\r\n                    prevState.val.amount -= 1\r\n                    prevState.object.total -= prevState.object.price;\r\n                    if (prevState.val.amount === 0){\r\n                        prevState.splice(object,1);\r\n                    }\r\n                    return prevState;\r\n                setItem((prevState) => {\r\n                    return prevState - 1;\r\n                })\r\n                return;\r\n                })\r\n            }\r\n        }\r\n    }\r\n    const toggleHandler = () => {\r\n        setIsOpen(prevState => !prevState);\r\n    }\r\n\r\n    let initialToken;\r\n   \r\n  \r\n    const tokenData = localStorage.getItem('token');\r\n\r\n    if (tokenData){\r\n        initialToken = tokenData;\r\n    }\r\n    const [token ,setToken] = useState(initialToken);\r\n\r\n    const userIsLoggedIn = !!token;\r\n\r\n    const loginHandler = (token) => {\r\n        setToken(token);\r\n        localStorage.setItem('token',token);\r\n    };\r\n    const logoutHandler = (token) => {\r\n        setToken(null);\r\n        localStorage.removeItem('token');\r\n    }\r\n    const contextValue = {\r\n        token: token,\r\n        isLoggedIn: userIsLoggedIn,\r\n        login: loginHandler,\r\n        logout: logoutHandler,\r\n        items: item,\r\n        isOpen: isOpen,\r\n        currCart: cart,\r\n        toggle: toggleHandler,\r\n        append: appendHandler,\r\n        remove: removeHandler\r\n    };\r\n    return <AuthContext.Provider value = {contextValue}>\r\n        {props.children}\r\n    </AuthContext.Provider>\r\n    }\r\n    return <AuthContext.Provider value = {AuthContext}>\r\n       {props.children}\r\n</AuthContext.Provider>\r\n}\r\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}