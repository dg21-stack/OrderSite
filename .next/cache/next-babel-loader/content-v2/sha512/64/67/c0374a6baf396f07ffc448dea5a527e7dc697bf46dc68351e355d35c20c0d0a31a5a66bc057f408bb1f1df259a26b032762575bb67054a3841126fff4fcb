{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/gaida/Documents/React/FoodOrderingSite/node_modules/@babel/runtime/regenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"C:/Users/gaida/Documents/React/FoodOrderingSite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport AuthContext from \"../../components/store/use-context\";\nimport { Fragment, useContext, useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Restaurant from \"../../components/RestaurantList/Restaurant\";\nimport ModalCart from \"../../components/Cart/ModalCart\";\nimport Card from \"../../components/Card/Card\";\nimport styles from '../../components/RestaurantList/RestaurantItem.module.css';\nimport Head from \"next/head\";\n\nvar AllRestaurants = function AllRestaurants() {\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState([]),\n      resList = _useState2[0],\n      setResList = _useState2[1];\n\n  var _useState3 = useState(1),\n      currList = _useState3[0],\n      setCurrList = _useState3[1];\n\n  var _useState4 = useState(null),\n      totalNum = _useState4[0],\n      setTotalNum = _useState4[1];\n\n  function getter() {\n    return _getter.apply(this, arguments);\n  }\n\n  function _getter() {\n    _getter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var enteredItemData,\n          response,\n          data,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              enteredItemData = _args.length > 0 && _args[0] !== undefined ? _args[0] : 1;\n              setIsLoading(true);\n              _context.next = 4;\n              return fetch(\"../api/getResHandler?pageIndex=\".concat(enteredItemData, \"&pageSize=2\"), {\n                method: 'GET'\n              });\n\n            case 4:\n              response = _context.sent;\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              data = _context.sent;\n              setIsLoading(false);\n\n              if (!totalNum) {\n                setTotalNum(data[0].totalRecords[0].description);\n              }\n\n              setResList(data[0].data);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getter.apply(this, arguments);\n  }\n\n  var authCtx = useContext(AuthContext);\n  var router = useRouter();\n\n  var setter = function setter() {\n    setCurrList(function (prevVal) {\n      if (totalNum / 2 > prevVal) {\n        prevVal++;\n      }\n\n      getter(prevVal);\n      return prevVal;\n    });\n  };\n\n  var plus = function plus() {\n    console.log('hrllo');\n    setCurrList(function (prevVal) {\n      if (totalNum / 2 > prevVal) {\n        prevVal++;\n        getter(prevVal);\n      }\n\n      return prevVal;\n    });\n  };\n\n  var minus = function minus() {\n    setCurrList(function (prevVal) {\n      if (prevVal > 1) {\n        prevVal--;\n        getter(prevVal);\n      }\n\n      return prevVal;\n    });\n  };\n\n  useEffect(function () {\n    getter();\n\n    if (!authCtx.isLoggedIn) {\n      router.push('/');\n    }\n\n    if (authCtx.isBusiness) {\n      router.push('/business');\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: /*#__PURE__*/_jsx(\"title\", {\n        children: \"Restaurants\"\n      })\n    }), /*#__PURE__*/_jsxs(Card, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.userContainer,\n        children: [\"Welcome, \", authCtx.user, \"!\"]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.subtitle,\n        children: \"Be sure to Grab Something Tasty Here at ReactEats!\"\n      })]\n    }), authCtx.isOpen && /*#__PURE__*/_jsx(ModalCart, {}), /*#__PURE__*/_jsx(Restaurant, {\n      res: resList,\n      plus: plus,\n      minus: minus,\n      isLoading: isLoading,\n      total: totalNum,\n      pageNum: currList\n    }, 1)]\n  });\n};\n\nexport default AllRestaurants;","map":null,"metadata":{},"sourceType":"module"}