{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport styles from './Details.module.css';\nimport { useEffect, useRef, useState } from 'react';\nimport ReviewItem from './ReviewItem';\n\nvar BusinessReviews = function BusinessReviews(props) {\n  var subjectRef = useRef();\n  var bodyRef = useRef();\n  console.log(props);\n\n  var _useState = useState(false),\n      star1 = _useState[0],\n      setStar1 = _useState[1];\n\n  var _useState2 = useState(false),\n      star2 = _useState2[0],\n      setStar2 = _useState2[1];\n\n  var _useState3 = useState(false),\n      star3 = _useState3[0],\n      setStar3 = _useState3[1];\n\n  var _useState4 = useState(false),\n      star4 = _useState4[0],\n      setStar4 = _useState4[1];\n\n  var _useState5 = useState(false),\n      star5 = _useState5[0],\n      setStar5 = _useState5[1];\n\n  var _useState6 = useState(false),\n      err = _useState6[0],\n      setErr = _useState6[1];\n\n  var _useState7 = useState(0),\n      display = _useState7[0],\n      setDisplay = _useState7[1];\n\n  var _useState8 = useState([]),\n      circArr = _useState8[0],\n      setCircArr = _useState8[1];\n\n  useEffect(function () {\n    setCircArr(function (prevVal) {\n      prevVal = [];\n\n      while (prevVal.length < props.total / 2) {\n        if (prevVal.length == props.pageNum - 1) {\n          prevVal.push( /*#__PURE__*/_jsx(\"span\", {\n            className: styles.selectedBtn,\n            children: \"  \\u25CF\"\n          }));\n        } else {\n          prevVal.push( /*#__PURE__*/_jsx(\"span\", {\n            style: {\n              color: '#797979'\n            },\n            children: \" \\u25CF\"\n          }));\n        }\n      }\n\n      return prevVal;\n    });\n  }, [props.plus, props.minus]);\n\n  var starSetter = function starSetter(e) {\n    e.preventDefault();\n\n    if (e.target.name == 'star 1') {\n      setStar1(function (prevState) {\n        if (star2 || star3 || star4 || star5) {\n          if (star2) {\n            setStar2(false);\n          }\n\n          if (star3) {\n            setStar3(false);\n          }\n\n          if (star4) {\n            setStar4(false);\n          }\n\n          if (star5) {\n            setStar5(false);\n          }\n\n          return prevState;\n        }\n\n        return !prevState;\n      });\n    }\n\n    if (e.target.name == 'star 2') {\n      setStar2(function (prevState) {\n        if (star3 || star4 || star5) {\n          if (star3) {\n            setStar3(false);\n          }\n\n          if (star4) {\n            setStar4(false);\n          }\n\n          if (star5) {\n            setStar5(false);\n          }\n\n          return prevState;\n        }\n\n        prevState = !prevState;\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n\n    if (e.target.name == 'star 3') {\n      setStar3(function (prevState) {\n        if (star4 || star5) {\n          if (star4) {\n            setStar4(false);\n          }\n\n          if (star5) {\n            setStar5(false);\n          }\n\n          return prevState;\n        }\n\n        prevState = !prevState;\n        setStar2(prevState === true);\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n\n    if (e.target.name == 'star 4') {\n      setStar4(function (prevState) {\n        if (star5) {\n          setStar5(false);\n          return prevState;\n        }\n\n        prevState = !prevState;\n        setStar3(prevState === true);\n        setStar2(prevState === true);\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n\n    if (e.target.name == 'star 5') {\n      console.log('h');\n      setStar5(function (prevState) {\n        prevState = !prevState;\n        setStar4(prevState === true);\n        setStar3(prevState === true);\n        setStar2(prevState === true);\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n  };\n\n  var clicker = function clicker(e) {\n    var stars = 5;\n\n    if (!star5) {\n      stars = 4;\n    }\n\n    if (!star4) {\n      stars = 3;\n    }\n\n    if (!star3) {\n      stars = 2;\n    }\n\n    if (!star2) {\n      stars = 1;\n    }\n\n    if (!star1) {\n      e.preventDefault();\n      setErr(true);\n      return;\n    }\n\n    if (subjectRef.current.value == '') {\n      e.preventDefault();\n      setErr(true);\n      return;\n    }\n\n    if (bodyRef.current.value == '') {\n      e.preventDefault();\n      setErr(true);\n      return;\n    }\n\n    setStar1(false);\n    setStar2(false);\n    setStar3(false);\n    setStar4(false);\n    setStar5(false);\n    var enteredReviewData = {\n      subject: subjectRef.current.value,\n      body: bodyRef.current.value,\n      stars: stars,\n      date: new Date().toISOString().split('T')[0]\n    };\n    subjectRef.current.value = '';\n    bodyRef.current.value = '';\n    props.addReviewHandler(enteredReviewData);\n  };\n\n  var displayHandler = function displayHandler() {\n    if (display == 0) {\n      setDisplay(275);\n      return;\n    }\n\n    setDisplay(0);\n  };\n\n  var plusHandler = function plusHandler(e) {\n    e.preventDefault();\n    props.plus();\n  };\n\n  var minusHandler = function minusHandler(e) {\n    e.preventDefault();\n    props.minus();\n  };\n\n  console.log(props.reviewList);\n\n  if (props.reviewList) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.reviewTitle,\n        children: \"Reviews\"\n      }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"button\", {\n        onClick: displayHandler,\n        className: display == 0 ? styles.displayButton : \"\".concat(styles.displayButton, \" \").concat(styles.on),\n        children: \"Click Here to Display Reviews\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: display == 0 ? styles.visibility : \"\".concat(styles.visibility, \" \").concat(styles.visiOn),\n        style: {\n          height: display\n        },\n        children: [props.isLoading && /*#__PURE__*/_jsx(\"div\", {\n          className: styles.loading,\n          children: \" Reviews Loading...\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            height: 213\n          },\n          children: !props.isLoading && props.reviewList.map(function (review) {\n            return /*#__PURE__*/_jsx(ReviewItem, {\n              user: review.user,\n              date: review.date,\n              body: review.body,\n              stars: review.stars,\n              subject: review.subject\n            }, review.id);\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: circArr\n        }), !(props.pageNum == 1) && /*#__PURE__*/_jsx(\"button\", {\n          className: styles.nextBtn,\n          onClick: minusHandler,\n          children: \"Previous\"\n        }), props.total % 2 == 0 ? props.pageNum != parseInt(props.total / 2) && /*#__PURE__*/_jsx(\"button\", {\n          className: styles.nextBtn,\n          onClick: plusHandler,\n          children: \"Next\"\n        }) : props.pageNum < parseInt(props.total / 2) + 1 && /*#__PURE__*/_jsx(\"button\", {\n          className: styles.nextBtn,\n          onClick: plusHandler,\n          children: \"Next\"\n        })]\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {});\n};\n\nexport default BusinessReviews;","map":null,"metadata":{},"sourceType":"module"}