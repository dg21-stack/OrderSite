{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\dgaidar\\\\Documents\\\\VScode\\\\React\\\\FoodOrderingSite\\\\components\\\\store\\\\use-context.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Card from \"../Card/Card\";\nconst AuthContext = /*#__PURE__*/React.createContext({\n  token: '',\n  isLoggedIn: false,\n  login: token => {},\n  logout: () => {}\n});\nconst CartContext = /*#__PURE__*/React.createContext({\n  items: 0,\n  isOpen: false,\n  currCart: [],\n  toggle: () => {},\n  append: item => {},\n  remove: item => {}\n});\nexport const CartContextProvider = props => {\n  let token = {};\n  let token1 = 0;\n\n  if (false) {\n    const cartData = localStorage.getItem('cart');\n    const itemData = localStorage.getItem('item');\n\n    if (cartData) {\n      token = cartData;\n    }\n\n    if (itemData) {\n      token1 = itemData;\n    }\n\n    const {\n      0: cart,\n      1: setCart\n    } = useState(token);\n    const {\n      0: item,\n      1: setItem\n    } = useState(token1);\n    const {\n      0: isOpen,\n      1: setIsOpen\n    } = useState(false);\n\n    const appendHandler = (val, price) => {\n      for (object in cart) {\n        if (object.item === val) {\n          setCart(prevState => {\n            prevState.object.amount += 1;\n            prevState.object.total += prevState.object.price;\n            return prevState;\n          });\n          setItem(prevState => {\n            return prevState + 1;\n          });\n          return;\n        }\n      }\n\n      setCart(prevState => {\n        return [...prevState, {\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }];\n      });\n      setItem(prevState => {\n        return prevState + 1;\n      });\n    };\n\n    const removeHandler = val => {\n      for (object in cart) {\n        if (object.item === val) {\n          setCart(prevState => {\n            prevState.val.amount -= 1;\n            prevState.object.total -= prevState.object.price;\n\n            if (prevState.val.amount === 0) {\n              delete cart[object];\n            }\n\n            setItem(prevState => {\n              return prevState - 1;\n            });\n            return;\n          });\n        }\n      }\n    };\n\n    const toggleHandler = () => {\n      setIsOpen(prevState => !prevState);\n    };\n\n    const contextValue = {\n      items: item,\n      isOpen: isOpen,\n      currCart: cart,\n      toggle: toggleHandler,\n      append: appendHandler,\n      remove: removeHandler\n    };\n    return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n      value: contextValue,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: CartContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 8\n  }, this);\n};\nexport const AuthContextProvider = props => {\n  let initialToken;\n\n  if (false) {\n    const tokenData = localStorage.getItem('token');\n\n    if (tokenData) {\n      initialToken = tokenData;\n    }\n\n    const {\n      0: token,\n      1: setToken\n    } = useState(initialToken);\n    const userIsLoggedIn = !!token;\n\n    const loginHandler = token => {\n      setToken(token);\n      localStorage.setItem('token', token);\n    };\n\n    const logoutHandler = token => {\n      setToken(null);\n      localStorage.removeItem('token');\n    };\n\n    const contextValue = {\n      token: token,\n      isLoggedIn: userIsLoggedIn,\n      login: loginHandler,\n      logout: logoutHandler\n    };\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: contextValue,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: AuthContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 12\n  }, this);\n};\nexport default AuthContext;","map":{"version":3,"sources":["C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/components/store/use-context.js"],"names":["React","useEffect","useState","Card","AuthContext","createContext","token","isLoggedIn","login","logout","CartContext","items","isOpen","currCart","toggle","append","item","remove","CartContextProvider","props","token1","cartData","localStorage","getItem","itemData","cart","setCart","setItem","setIsOpen","appendHandler","val","price","object","prevState","amount","total","removeHandler","toggleHandler","contextValue","children","AuthContextProvider","initialToken","tokenData","setToken","userIsLoggedIn","loginHandler","logoutHandler","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,IAAP,MAAiB,cAAjB;AAEA,MAAMC,WAAW,gBAAGJ,KAAK,CAACK,aAAN,CAAoB;AACpCC,EAAAA,KAAK,EAAE,EAD6B;AAEpCC,EAAAA,UAAU,EAAE,KAFwB;AAGpCC,EAAAA,KAAK,EAAGF,KAAD,IAAW,CAAE,CAHgB;AAIpCG,EAAAA,MAAM,EAAE,MAAM,CAAE;AAJoB,CAApB,CAApB;AAMA,MAAMC,WAAW,gBAAGV,KAAK,CAACK,aAAN,CAAoB;AACpCM,EAAAA,KAAK,EAAE,CAD6B;AAEpCC,EAAAA,MAAM,EAAE,KAF4B;AAGpCC,EAAAA,QAAQ,EAAE,EAH0B;AAIpCC,EAAAA,MAAM,EAAE,MAAM,CAAE,CAJoB;AAKpCC,EAAAA,MAAM,EAAGC,IAAD,IAAU,CAAE,CALgB;AAMpCC,EAAAA,MAAM,EAAGD,IAAD,IAAU,CAAE;AANgB,CAApB,CAApB;AASA,OAAO,MAAME,mBAAmB,GAAIC,KAAD,IAAW;AAC1C,MAAIb,KAAK,GAAG,EAAZ;AACA,MAAIc,MAAM,GAAG,CAAb;;AACJ,aAAkC;AAC9B,UAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB;AACA,UAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB;;AACA,QAAIF,QAAJ,EAAc;AACVf,MAAAA,KAAK,GAAGe,QAAR;AACH;;AACD,QAAIG,QAAJ,EAAc;AACVJ,MAAAA,MAAM,GAAGI,QAAT;AACH;;AACD,UAAM;AAAA,SAACC,IAAD;AAAA,SAAOC;AAAP,QAAkBxB,QAAQ,CAACI,KAAD,CAAhC;AACA,UAAM;AAAA,SAACU,IAAD;AAAA,SAAOW;AAAP,QAAkBzB,QAAQ,CAACkB,MAAD,CAAhC;AACA,UAAM;AAAA,SAACR,MAAD;AAAA,SAASgB;AAAT,QAAsB1B,QAAQ,CAAC,KAAD,CAApC;;AAEA,UAAM2B,aAAa,GAAG,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAClC,WAAKC,MAAL,IAAeP,IAAf,EAAqB;AACjB,YAAIO,MAAM,CAAChB,IAAP,KAAgBc,GAApB,EAAyB;AACrBJ,UAAAA,OAAO,CAAEO,SAAD,IAAe;AACnBA,YAAAA,SAAS,CAACD,MAAV,CAAiBE,MAAjB,IAA2B,CAA3B;AACAD,YAAAA,SAAS,CAACD,MAAV,CAAiBG,KAAjB,IAA0BF,SAAS,CAACD,MAAV,CAAiBD,KAA3C;AACA,mBAAOE,SAAP;AACH,WAJM,CAAP;AAKAN,UAAAA,OAAO,CAAEM,SAAD,IAAe;AACnB,mBAAOA,SAAS,GAAG,CAAnB;AACH,WAFM,CAAP;AAGA;AACH;AACJ;;AACDP,MAAAA,OAAO,CAAEO,SAAD,IAAe;AACnB,eAAO,CAAC,GAAGA,SAAJ,EACH;AACIC,UAAAA,MAAM,EAAE,CADZ;AAEIC,UAAAA,KAAK,EAAEJ,KAFX;AAGIA,UAAAA,KAAK,EAAEA,KAHX;AAIIf,UAAAA,IAAI,EAAEc;AAJV,SADG,CAAP;AAQH,OATM,CAAP;AAUAH,MAAAA,OAAO,CAAEM,SAAD,IAAe;AACnB,eAAOA,SAAS,GAAG,CAAnB;AACH,OAFM,CAAP;AAGH,KA3BD;;AA4BA,UAAMG,aAAa,GAAIN,GAAD,IAAS;AAC3B,WAAKE,MAAL,IAAeP,IAAf,EAAoB;AAChB,YAAIO,MAAM,CAAChB,IAAP,KAAgBc,GAApB,EAAwB;AACpBJ,UAAAA,OAAO,CAAEO,SAAD,IAAe;AACnBA,YAAAA,SAAS,CAACH,GAAV,CAAcI,MAAd,IAAwB,CAAxB;AACAD,YAAAA,SAAS,CAACD,MAAV,CAAiBG,KAAjB,IAA0BF,SAAS,CAACD,MAAV,CAAiBD,KAA3C;;AACA,gBAAIE,SAAS,CAACH,GAAV,CAAcI,MAAd,KAAyB,CAA7B,EAA+B;AAC3B,qBAAOT,IAAI,CAACO,MAAD,CAAX;AACH;;AACLL,YAAAA,OAAO,CAAEM,SAAD,IAAe;AACnB,qBAAOA,SAAS,GAAG,CAAnB;AACH,aAFM,CAAP;AAGA;AACC,WAVM,CAAP;AAWH;AACJ;AACJ,KAhBD;;AAiBA,UAAMI,aAAa,GAAG,MAAM;AACxBT,MAAAA,SAAS,CAACK,SAAS,IAAI,CAACA,SAAf,CAAT;AACH,KAFD;;AAGA,UAAMK,YAAY,GAAG;AACjB3B,MAAAA,KAAK,EAAEK,IADU;AAEjBJ,MAAAA,MAAM,EAAEA,MAFS;AAGjBC,MAAAA,QAAQ,EAAEY,IAHO;AAIjBX,MAAAA,MAAM,EAAEuB,aAJS;AAKjBtB,MAAAA,MAAM,EAAEc,aALS;AAMjBZ,MAAAA,MAAM,EAAEmB;AANS,KAArB;AAQA,wBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAIE,YAA/B;AAAA,gBACFnB,KAAK,CAACoB;AADJ;AAAA;AAAA;AAAA;AAAA,YAAP;AAGC;;AAEL,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAI7B,WAA/B;AAAA,cACFS,KAAK,CAACoB;AADJ;AAAA;AAAA;AAAA;AAAA,UAAP;AAKC,CAlFM;AAoFP,OAAO,MAAMC,mBAAmB,GAAIrB,KAAD,IAAW;AAC1C,MAAIsB,YAAJ;;AACA,aAAmC;AAEnC,UAAMC,SAAS,GAAGpB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlB;;AAEA,QAAImB,SAAJ,EAAc;AACVD,MAAAA,YAAY,GAAGC,SAAf;AACH;;AACD,UAAM;AAAA,SAACpC,KAAD;AAAA,SAAQqC;AAAR,QAAoBzC,QAAQ,CAACuC,YAAD,CAAlC;AAEA,UAAMG,cAAc,GAAG,CAAC,CAACtC,KAAzB;;AAEA,UAAMuC,YAAY,GAAIvC,KAAD,IAAW;AAC5BqC,MAAAA,QAAQ,CAACrC,KAAD,CAAR;AACAgB,MAAAA,YAAY,CAACK,OAAb,CAAqB,OAArB,EAA6BrB,KAA7B;AACH,KAHD;;AAIA,UAAMwC,aAAa,GAAIxC,KAAD,IAAW;AAC7BqC,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACArB,MAAAA,YAAY,CAACyB,UAAb,CAAwB,OAAxB;AACH,KAHD;;AAIA,UAAMT,YAAY,GAAG;AACjBhC,MAAAA,KAAK,EAAEA,KADU;AAEjBC,MAAAA,UAAU,EAAEqC,cAFK;AAGjBpC,MAAAA,KAAK,EAAEqC,YAHU;AAIjBpC,MAAAA,MAAM,EAAEqC;AAJS,KAArB;AAMA,wBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAIR,YAA/B;AAAA,gBACFnB,KAAK,CAACoB;AADJ;AAAA;AAAA;AAAA;AAAA,YAAP;AAGC;;AACD,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAInC,WAA/B;AAAA,cACHe,KAAK,CAACoB;AADH;AAAA;AAAA;AAAA;AAAA,UAAP;AAGH,CAlCM;AAmCP,eAAenC,WAAf","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Card from \"../Card/Card\";\r\n\r\nconst AuthContext = React.createContext({\r\n    token: '',\r\n    isLoggedIn: false,\r\n    login: (token) => {},\r\n    logout: () => {}\r\n});\r\nconst CartContext = React.createContext({\r\n    items: 0,\r\n    isOpen: false,\r\n    currCart: [],\r\n    toggle: () => {},\r\n    append: (item) => {},\r\n    remove: (item) => {}\r\n})\r\n\r\nexport const CartContextProvider = (props) => {\r\n    let token = {};\r\n    let token1 = 0;\r\nif (typeof window !== 'undefined'){\r\n    const cartData = localStorage.getItem('cart');\r\n    const itemData = localStorage.getItem('item');\r\n    if (cartData) {\r\n        token = cartData;\r\n    }\r\n    if (itemData) {\r\n        token1 = itemData; \r\n    }\r\n    const [cart, setCart] = useState(token);\r\n    const [item, setItem] = useState(token1);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const appendHandler = (val, price) => {\r\n        for (object in cart) {\r\n            if (object.item === val) {\r\n                setCart((prevState) => {\r\n                    prevState.object.amount += 1;\r\n                    prevState.object.total += prevState.object.price;\r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    return prevState + 1;\r\n                })\r\n                return;\r\n            }\r\n        }\r\n        setCart((prevState) => {\r\n            return [...prevState, \r\n                {\r\n                    amount: 1,\r\n                    total: price,\r\n                    price: price,\r\n                    item: val\r\n                }\r\n            ]\r\n        })\r\n        setItem((prevState) => {\r\n            return prevState + 1; \r\n        })\r\n    }\r\n    const removeHandler = (val) => {\r\n        for (object in cart){\r\n            if (object.item === val){\r\n                setCart((prevState) => {\r\n                    prevState.val.amount -= 1\r\n                    prevState.object.total -= prevState.object.price;\r\n                    if (prevState.val.amount === 0){\r\n                        delete cart[object];\r\n                    }\r\n                setItem((prevState) => {\r\n                    return prevState - 1;\r\n                })\r\n                return;\r\n                })\r\n            }\r\n        }\r\n    }\r\n    const toggleHandler = () => {\r\n        setIsOpen(prevState => !prevState);\r\n    }\r\n    const contextValue = { \r\n        items: item,\r\n        isOpen: isOpen,\r\n        currCart: cart,\r\n        toggle: toggleHandler,\r\n        append: appendHandler,\r\n        remove: removeHandler\r\n    }\r\n    return <CartContext.Provider value = {contextValue}>\r\n        {props.children}\r\n    </CartContext.Provider>\r\n    }\r\n\r\nreturn <CartContext.Provider value = {CartContext}>\r\n    {props.children}\r\n</CartContext.Provider>\r\n\r\n\r\n}\r\n\r\nexport const AuthContextProvider = (props) => {\r\n    let initialToken;\r\n    if (typeof window !== 'undefined') {\r\n  \r\n    const tokenData = localStorage.getItem('token');\r\n\r\n    if (tokenData){\r\n        initialToken = tokenData;\r\n    }\r\n    const [token ,setToken] = useState(initialToken);\r\n\r\n    const userIsLoggedIn = !!token;\r\n\r\n    const loginHandler = (token) => {\r\n        setToken(token);\r\n        localStorage.setItem('token',token);\r\n    };\r\n    const logoutHandler = (token) => {\r\n        setToken(null);\r\n        localStorage.removeItem('token');\r\n    }\r\n    const contextValue = {\r\n        token: token,\r\n        isLoggedIn: userIsLoggedIn,\r\n        login: loginHandler,\r\n        logout: logoutHandler\r\n    };\r\n    return <AuthContext.Provider value = {contextValue}>\r\n        {props.children}\r\n    </AuthContext.Provider>\r\n    }\r\n    return <AuthContext.Provider value = {AuthContext}>\r\n       {props.children}\r\n</AuthContext.Provider>\r\n}\r\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}