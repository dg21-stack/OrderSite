{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport styles from './Details.module.css';\nimport { useEffect, useRef, useState } from 'react';\nimport ReviewItem from './ReviewItem';\n\nconst ReviewPage = props => {\n  const subjectRef = useRef();\n  const bodyRef = useRef();\n  const {\n    0: star1,\n    1: setStar1\n  } = useState(false);\n  const {\n    0: star2,\n    1: setStar2\n  } = useState(false);\n  const {\n    0: star3,\n    1: setStar3\n  } = useState(false);\n  const {\n    0: star4,\n    1: setStar4\n  } = useState(false);\n  const {\n    0: star5,\n    1: setStar5\n  } = useState(false);\n  const {\n    0: err,\n    1: setErr\n  } = useState(false);\n  const {\n    0: display,\n    1: setDisplay\n  } = useState(0);\n  const {\n    0: circArr,\n    1: setCircArr\n  } = useState([]);\n  useEffect(() => {\n    setCircArr(prevVal => {\n      prevVal = [];\n\n      while (prevVal.length < props.total / 2) {\n        if (prevVal.length == props.pageNum - 1) {\n          prevVal.push( /*#__PURE__*/_jsx(\"span\", {\n            className: styles.selectedBtn,\n            children: \"  \\u25CF\"\n          }));\n        } else {\n          prevVal.push( /*#__PURE__*/_jsx(\"span\", {\n            style: {\n              color: '#797979'\n            },\n            children: \" \\u25CF\"\n          }));\n        }\n      }\n\n      return prevVal;\n    });\n  }, [props.plus, props.minus]);\n\n  const starSetter = e => {\n    e.preventDefault();\n\n    if (e.target.name == 'star 1') {\n      setStar1(prevState => {\n        if (star2 || star3 || star4 || star5) {\n          if (star2) {\n            setStar2(false);\n          }\n\n          if (star3) {\n            setStar3(false);\n          }\n\n          if (star4) {\n            setStar4(false);\n          }\n\n          if (star5) {\n            setStar5(false);\n          }\n\n          return prevState;\n        }\n\n        return !prevState;\n      });\n    }\n\n    if (e.target.name == 'star 2') {\n      setStar2(prevState => {\n        if (star3 || star4 || star5) {\n          if (star3) {\n            setStar3(false);\n          }\n\n          if (star4) {\n            setStar4(false);\n          }\n\n          if (star5) {\n            setStar5(false);\n          }\n\n          return prevState;\n        }\n\n        prevState = !prevState;\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n\n    if (e.target.name == 'star 3') {\n      setStar3(prevState => {\n        if (star4 || star5) {\n          if (star4) {\n            setStar4(false);\n          }\n\n          if (star5) {\n            setStar5(false);\n          }\n\n          return prevState;\n        }\n\n        prevState = !prevState;\n        setStar2(prevState === true);\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n\n    if (e.target.name == 'star 4') {\n      setStar4(prevState => {\n        if (star5) {\n          setStar5(false);\n          return prevState;\n        }\n\n        prevState = !prevState;\n        setStar3(prevState === true);\n        setStar2(prevState === true);\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n\n    if (e.target.name == 'star 5') {\n      console.log('h');\n      setStar5(prevState => {\n        prevState = !prevState;\n        setStar4(prevState === true);\n        setStar3(prevState === true);\n        setStar2(prevState === true);\n        setStar1(prevState === true);\n        return prevState;\n      });\n    }\n  };\n\n  const clicker = e => {\n    let stars = 5;\n\n    if (!star5) {\n      stars = 4;\n    }\n\n    if (!star4) {\n      stars = 3;\n    }\n\n    if (!star3) {\n      stars = 2;\n    }\n\n    if (!star2) {\n      stars = 1;\n    }\n\n    if (!star1) {\n      e.preventDefault();\n      setErr(true);\n      return;\n    }\n\n    if (subjectRef.current.value == '') {\n      e.preventDefault();\n      setErr(true);\n      return;\n    }\n\n    if (bodyRef.current.value == '') {\n      e.preventDefault();\n      setErr(true);\n      return;\n    }\n\n    setStar1(false);\n    setStar2(false);\n    setStar3(false);\n    setStar4(false);\n    setStar5(false);\n    const enteredReviewData = {\n      subject: subjectRef.current.value,\n      body: bodyRef.current.value,\n      stars: stars,\n      date: new Date().toISOString().split('T')[0]\n    };\n    subjectRef.current.value = '';\n    bodyRef.current.value = '';\n    props.addReviewHandler(enteredReviewData);\n  };\n\n  const displayHandler = () => {\n    if (display == 0) {\n      setDisplay(275);\n      return;\n    }\n\n    setDisplay(0);\n  };\n\n  const plusHandler = e => {\n    e.preventDefault();\n    props.plus();\n  };\n\n  const minusHandler = e => {\n    e.preventDefault();\n    props.minus();\n  };\n\n  console.log(props.reviewList);\n\n  if (props.reviewList) {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.reviewTitle,\n        children: \"Reviews\"\n      }), /*#__PURE__*/_jsxs(\"form\", {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.stars,\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            onClick: starSetter,\n            name: \"star 5\",\n            className: star5 ? styles.trueBtn : styles.falseBtn,\n            children: \" \\u2605\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: starSetter,\n            name: \"star 4\",\n            className: star4 ? styles.trueBtn : styles.falseBtn,\n            children: \" \\u2605\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: starSetter,\n            name: \"star 3\",\n            className: star3 ? styles.trueBtn : styles.falseBtn,\n            children: \" \\u2605\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: starSetter,\n            name: \"star 2\",\n            className: star2 ? styles.trueBtn : styles.falseBtn,\n            children: \" \\u2605\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: starSetter,\n            name: \"star 1\",\n            className: star1 ? styles.trueBtn : styles.falseBtn,\n            children: \" \\u2605\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.input,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"subject\",\n            children: \"Subject\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            ref: subjectRef,\n            onInput: () => {\n              setErr(false);\n            },\n            name: \"subject\",\n            placeholder: \"subject\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.input,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"body\",\n            children: \"Body\"\n          }), /*#__PURE__*/_jsx(\"textarea\", {\n            ref: bodyRef,\n            onInput: () => {\n              setErr(false);\n            },\n            name: \"body\",\n            placeholder: \"body\"\n          })]\n        }), /*#__PURE__*/_jsx(\"button\", {\n          onClick: clicker,\n          className: err ? styles.errBtn : styles.normBtn,\n          children: \"Add Review\"\n        })]\n      }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"button\", {\n        onClick: displayHandler,\n        className: display == 0 ? styles.displayButton : `${styles.displayButton} ${styles.on}`,\n        children: \"Click Here to Display Reviews\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: display == 0 ? styles.visibility : `${styles.visibility} ${styles.visiOn}`,\n        style: {\n          height: display\n        },\n        children: [props.isLoading && /*#__PURE__*/_jsx(\"div\", {\n          className: styles.loading,\n          children: \" Reviews Loading...\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            height: 213\n          },\n          children: !props.isLoading && props.reviewList.map(review => /*#__PURE__*/_jsx(ReviewItem, {\n            user: review.user,\n            date: review.date,\n            body: review.body,\n            stars: review.stars,\n            subject: review.subject\n          }, review.id))\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: circArr\n        }), !(props.pageNum == 1) && /*#__PURE__*/_jsx(\"button\", {\n          className: styles.nextBtn,\n          onClick: minusHandler,\n          children: \"Previous\"\n        }), props.total % 2 == 0 ? props.pageNum != parseInt(props.total / 2) && /*#__PURE__*/_jsx(\"button\", {\n          className: styles.nextBtn,\n          onClick: plusHandler,\n          children: \"Next\"\n        }) : props.pageNum < parseInt(props.total / 2) + 1 && /*#__PURE__*/_jsx(\"button\", {\n          className: styles.nextBtn,\n          onClick: plusHandler,\n          children: \"Next\"\n        })]\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {});\n};\n\nexport default ReviewPage;","map":null,"metadata":{},"sourceType":"module"}