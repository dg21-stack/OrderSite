{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dgaidar\\\\Documents\\\\VScode\\\\React\\\\FoodOrderingSite\\\\components\\\\store\\\\use-context.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Card from \"../Card/Card\";\nvar AuthContext = /*#__PURE__*/React.createContext({\n  token: '',\n  isLoggedIn: false,\n  login: function login(token, firstName, lastName, business) {},\n  logout: function logout() {},\n  user: '',\n  isBusiness: false,\n  items: 0,\n  totalPrice: 0,\n  isOpen: false,\n  currCart: [],\n  toggle: function toggle() {},\n  append: function append(item) {},\n  remove: function remove(item) {}\n});\nexport var AuthContextProvider = function AuthContextProvider(props) {\n  _s();\n\n  var token0 = [];\n  var token1 = 0;\n  var token2 = 0;\n  var token3 = '';\n  var token4 = false;\n\n  if (true) {\n    var cartData = localStorage.getItem('cart');\n    var itemData = parseInt(localStorage.getItem('item'));\n    var priceData = parseInt(localStorage.getItem('total'));\n    var userData = localStorage.getItem('user');\n    var businessData = localStorage.getItem('business');\n\n    if (cartData) {\n      token0 = JSON.parse(cartData);\n      console.log(token0);\n    }\n\n    if (itemData) {\n      token1 = itemData;\n    }\n\n    if (priceData) {\n      token2 = priceData;\n    }\n\n    if (userData) {\n      token3 = userData;\n    }\n\n    token4 = businessData.parseBoolean();\n\n    var _useState = useState(token0),\n        cart = _useState[0],\n        setCart = _useState[1];\n\n    var _useState2 = useState(token1),\n        item = _useState2[0],\n        setItem = _useState2[1];\n\n    var _useState3 = useState(false),\n        isOpen = _useState3[0],\n        setIsOpen = _useState3[1];\n\n    var _useState4 = useState(token2),\n        totalAmt = _useState4[0],\n        setTotalAmt = _useState4[1];\n\n    var _useState5 = useState(token3),\n        name = _useState5[0],\n        setName = _useState5[1];\n\n    var _useState6 = useState(token4),\n        isBusiness = _useState6[0],\n        setIsBusiness = _useState6[1];\n\n    var appendHandler = function appendHandler(val, price) {\n      var a = [];\n\n      var _loop = function _loop(object) {\n        if (cart[object].item === val) {\n          setCart(function (prevState) {\n            prevState[object].amount += 1;\n            prevState[object].total += prevState[object].price;\n            localStorage.setItem('cart', JSON.stringify(prevState));\n            return prevState;\n          });\n          setItem(function (prevState) {\n            return parseInt(prevState) + 1;\n          });\n          setTotalAmt(function (prevState) {\n            return prevState + cart[object].price;\n          });\n          localStorage.setItem('item', parseInt(item) + 1);\n          localStorage.setItem('total', parseInt(totalAmt) + cart[object].price);\n          return {\n            v: void 0\n          };\n        }\n      };\n\n      for (var object in cart) {\n        var _ret = _loop(object);\n\n        if (typeof _ret === \"object\") return _ret.v;\n      }\n\n      a = [{\n        amount: 1,\n        total: price,\n        price: price,\n        item: val\n      }];\n      localStorage.setItem('cart', JSON.stringify(a));\n      setCart(function (prevState) {\n        if (prevState !== undefined) {\n          return [].concat(_toConsumableArray(prevState), [{\n            amount: 1,\n            total: price,\n            price: price,\n            item: val\n          }]);\n        }\n\n        return [{\n          amount: 1,\n          total: price,\n          price: price,\n          item: val\n        }];\n      });\n      setItem(function (prevState) {\n        return parseInt(prevState) + 1;\n      });\n      localStorage.setItem('item', parseInt(item) + 1);\n      localStorage.setItem('total', parseInt(totalAmt) + price);\n      setTotalAmt(function (prevState) {\n        return prevState + price;\n      });\n    };\n\n    var removeHandler = function removeHandler(val) {\n      var a = 0;\n\n      var _loop2 = function _loop2(object) {\n        if (cart[object].item === val) {\n          setCart(function (prevState) {\n            a = prevState[object].amount;\n\n            if (prevState[object].amount !== 0) {\n              prevState[object].amount -= 1;\n              prevState[object].total -= prevState[object].price;\n              localStorage.setItem('cart', JSON.stringify(prevState));\n              return prevState;\n            }\n\n            return prevState;\n          });\n          setItem(function (prevState) {\n            if (a !== 0) {\n              return parseInt(prevState) - 1;\n            }\n\n            return prevState;\n          });\n\n          if (a !== 0) {\n            localStorage.setItem('total', parseInt(totalAmt) - cart[object].price);\n            setTotalAmt(function (prevState) {\n              return prevState - cart[object].price;\n            });\n            localStorage.setItem('item', parseInt(item) - 1);\n          }\n\n          return {\n            v: void 0\n          };\n        }\n      };\n\n      for (var object in cart) {\n        var _ret2 = _loop2(object);\n\n        if (typeof _ret2 === \"object\") return _ret2.v;\n      }\n    };\n\n    var toggleHandler = function toggleHandler() {\n      setIsOpen(function (prevState) {\n        return !prevState;\n      });\n    };\n\n    var initialToken;\n    var tokenData = localStorage.getItem('token');\n\n    if (tokenData) {\n      initialToken = tokenData;\n    }\n\n    var _useState7 = useState(initialToken),\n        token = _useState7[0],\n        setToken = _useState7[1];\n\n    var userIsLoggedIn = !!token;\n\n    var loginHandler = function loginHandler(token, firstName, lastName, business) {\n      setToken(token);\n      setName(firstName + ' ' + lastName);\n      console.log(business);\n      localStorage.setItem('token', token);\n      setIsBusiness(business);\n      localStorage.setItem('business', business);\n      localStorage.setItem('user', firstName + ' ' + lastName);\n    };\n\n    var logoutHandler = function logoutHandler(token) {\n      setToken(null);\n      localStorage.removeItem('token');\n      localStorage.clear();\n      setCart([]);\n      setTotalAmt(0);\n      setIsBusiness(null);\n      setItem(0);\n    };\n\n    console.log(totalAmt);\n    var contextValue = {\n      token: token,\n      isLoggedIn: userIsLoggedIn,\n      login: loginHandler,\n      logout: logoutHandler,\n      user: name,\n      items: item,\n      isOpen: isOpen,\n      isBusiness: isBusiness,\n      currCart: cart,\n      totalprice: totalAmt,\n      toggle: toggleHandler,\n      append: appendHandler,\n      remove: removeHandler\n    };\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: contextValue,\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 12\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: AuthContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 12\n  }, _this);\n};\n\n_s(AuthContextProvider, \"NqMEhU++7nt0Ob9bJgNjrlypOUs=\");\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["C:/Users/dgaidar/Documents/VScode/React/FoodOrderingSite/components/store/use-context.js"],"names":["React","useEffect","useState","Card","AuthContext","createContext","token","isLoggedIn","login","firstName","lastName","business","logout","user","isBusiness","items","totalPrice","isOpen","currCart","toggle","append","item","remove","AuthContextProvider","props","token0","token1","token2","token3","token4","cartData","localStorage","getItem","itemData","parseInt","priceData","userData","businessData","JSON","parse","console","log","parseBoolean","cart","setCart","setItem","setIsOpen","totalAmt","setTotalAmt","name","setName","setIsBusiness","appendHandler","val","price","a","object","prevState","amount","total","stringify","undefined","removeHandler","toggleHandler","initialToken","tokenData","setToken","userIsLoggedIn","loginHandler","logoutHandler","removeItem","clear","contextValue","totalprice","children"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Card from \"../Card/Card\";\r\n\r\nconst AuthContext = React.createContext({\r\n    token: '',\r\n    isLoggedIn: false,\r\n    login: (token, firstName, lastName, business) => {},\r\n    logout: () => {},\r\n    user: '',\r\n    isBusiness: false,\r\n    items: 0,\r\n    totalPrice: 0,\r\n    isOpen: false,\r\n    currCart: [],\r\n    toggle: () => {},\r\n    append: (item) => {},\r\n    remove: (item) => {}\r\n});\r\n\r\n\r\n\r\nexport const AuthContextProvider = (props) => {\r\n    let token0 = [];\r\n    let token1 = 0;\r\n    let token2 = 0;\r\n    let token3 = '';\r\n    let token4 = false;\r\nif (typeof window !== 'undefined'){\r\n    const cartData = localStorage.getItem('cart');\r\n    const itemData = parseInt(localStorage.getItem('item'));\r\n    const priceData = parseInt(localStorage.getItem('total'));\r\n    const userData = localStorage.getItem('user');\r\n    const businessData = localStorage.getItem('business');\r\n    if (cartData) {\r\n        token0 =JSON.parse(cartData);\r\n        console.log(token0);\r\n    }\r\n    if (itemData) {\r\n        token1 = itemData; \r\n    }\r\n    if (priceData) {\r\n        token2 = priceData; \r\n    }\r\n    if (userData) {\r\n        token3 = userData;\r\n    }\r\n  \r\n    token4 = businessData.parseBoolean();\r\n \r\n    const [cart, setCart] = useState(token0);\r\n    const [item, setItem] = useState(token1);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [totalAmt, setTotalAmt] = useState(token2);\r\n    const  [name, setName] = useState(token3);\r\n    const [isBusiness, setIsBusiness] = useState(token4);\r\n\r\n    const appendHandler = (val, price) => {\r\n        let a = []\r\n        for (const object in cart) {\r\n\r\n            if (cart[object].item === val) {\r\n                setCart((prevState) => {\r\n                    prevState[object].amount += 1;\r\n                    prevState[object].total += prevState[object].price;\r\n                    localStorage.setItem('cart',JSON.stringify(prevState));\r\n                  \r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    return parseInt(prevState) + 1;\r\n                })\r\n                \r\n                setTotalAmt(prevState => {return prevState + cart[object].price});\r\n                localStorage.setItem('item', parseInt(item) + 1);\r\n                localStorage.setItem('total',parseInt(totalAmt) + cart[object].price);\r\n                return;\r\n            }\r\n        }\r\n        a = [\r\n            {\r\n                amount: 1,\r\n                total: price,\r\n                price: price,\r\n                item: val\r\n            }\r\n        ]\r\n        localStorage.setItem('cart',JSON.stringify(a));\r\n        setCart((prevState) => {\r\n            if  (prevState !== undefined){\r\n            return [ ...prevState,\r\n                {\r\n                    amount: 1,\r\n                    total: price,\r\n                    price: price,\r\n                    item: val\r\n                }\r\n            ]\r\n        } \r\n        return [\r\n            {\r\n                \r\n                amount: 1,\r\n                total: price,\r\n                price: price,\r\n                item: val\r\n            \r\n            }\r\n        ]\r\n        })\r\n        setItem((prevState) => {\r\n            return parseInt(prevState) + 1; \r\n        })\r\n        localStorage.setItem('item', parseInt(item) + 1);\r\n        localStorage.setItem('total',parseInt(totalAmt) + price);\r\n        setTotalAmt(prevState => {return prevState + price});\r\n\r\n \r\n    }\r\n    const removeHandler = (val) => {\r\n        let a = 0\r\n        for (const object in cart){\r\n            if (cart[object].item === val) {\r\n                setCart((prevState) => {\r\n                    a = prevState[object].amount;\r\n                    if (prevState[object].amount !== 0) {\r\n                    prevState[object].amount -= 1;\r\n                    prevState[object].total -= prevState[object].price;\r\n                    localStorage.setItem('cart',JSON.stringify(prevState));\r\n                    return prevState;\r\n                    }\r\n                    return prevState;\r\n                })\r\n                setItem((prevState) => {\r\n                    if (a !== 0){\r\n                    return parseInt(prevState) - 1;\r\n                    }\r\n                    return prevState;\r\n                })\r\n                if (a !== 0){\r\n                localStorage.setItem('total',parseInt(totalAmt) - cart[object].price);\r\n                setTotalAmt(prevState => {return prevState - cart[object].price});\r\n                localStorage.setItem('item', parseInt(item) - 1);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    const toggleHandler = () => {\r\n        setIsOpen(prevState => !prevState);\r\n    }\r\n\r\n    let initialToken;\r\n    \r\n  \r\n    const tokenData = localStorage.getItem('token');\r\n\r\n    if (tokenData){\r\n        initialToken = tokenData;\r\n    }\r\n    const [token ,setToken] = useState(initialToken);\r\n\r\n    const userIsLoggedIn = !!token;\r\n\r\n    const loginHandler = (token, firstName, lastName, business) => {\r\n        setToken(token);\r\n        setName(firstName + ' ' + lastName);\r\n        console.log(business);\r\n        localStorage.setItem('token',token);\r\n        setIsBusiness(business);\r\n        localStorage.setItem('business',business);\r\n        localStorage.setItem('user',firstName + ' ' + lastName);\r\n    };\r\n    const logoutHandler = (token) => {\r\n        setToken(null);\r\n        localStorage.removeItem('token');\r\n        localStorage.clear();\r\n        setCart([]);\r\n        setTotalAmt(0);\r\n        setIsBusiness(null);\r\n        setItem(0);\r\n    }\r\n    console.log(totalAmt);\r\n    const contextValue = {\r\n        token: token,\r\n        isLoggedIn: userIsLoggedIn,\r\n        login: loginHandler,\r\n        logout: logoutHandler,\r\n        user: name,\r\n        items: item,\r\n        isOpen: isOpen,\r\n        isBusiness: isBusiness,\r\n        currCart: cart,\r\n        totalprice: totalAmt,\r\n        toggle: toggleHandler,\r\n        append: appendHandler,\r\n        remove: removeHandler\r\n    };\r\n    return <AuthContext.Provider value = {contextValue}>\r\n        {props.children}\r\n    </AuthContext.Provider>\r\n    }\r\n    return <AuthContext.Provider value = {AuthContext}>\r\n       {props.children}\r\n</AuthContext.Provider>\r\n}\r\nexport default AuthContext;"]},"metadata":{},"sourceType":"module"}